
# 2022-03-08 09:40:09.867403
+exit

# 2022-03-08 09:50:54.295886
+select pg_reload_conf();

# 2022-03-08 09:50:57.734761
+exit

# 2022-03-08 09:51:54.639702
+\d

# 2022-03-08 09:51:56.125444
+exit

# 2022-03-08 09:53:20.560009
+hola;

# 2022-03-08 09:53:22.060053
+exit

# 2022-03-08 09:54:10.387934
+create table paco(texto text);

# 2022-03-08 09:54:12.341489
+exit

# 2022-03-09 09:22:26.378070
+\c pl1;

# 2022-03-09 09:22:29.097018
+\d

# 2022-03-09 09:22:30.080216
+asdf

# 2022-03-09 09:22:33.221366
+exit

# 2022-03-09 09:23:50.177201
+hola paco que tal;

# 2022-03-09 09:23:51.739102
+exit

# 2022-03-09 09:47:21.483838
+\c pl1;

# 2022-03-09 09:47:38.967858
+select * from alumno where carnet ='paoc';

# 2022-03-09 09:47:45.140970
+select * from alumno where carnet ='22';

# 2022-03-09 09:47:47.139964
+exit

# 2022-03-09 11:38:44.097334
+\c pl1;

# 2022-03-09 11:38:45.286628
+\d

# 2022-03-09 11:38:52.253651
+drop table alumno;

# 2022-03-09 11:38:59.051154
+drop table alumno3;

# 2022-03-09 11:39:01.769772
+\d

# 2022-03-09 11:55:34.927418
+exit

# 2022-03-10 10:03:51.002275
+create table alumno (

# 2022-03-10 10:03:51.049627
+carnet integer primary key,

# 2022-03-10 10:03:51.065312
+nombre text,

# 2022-03-10 10:03:51.096303
+codigo_de_carrera integer,

# 2022-03-10 10:03:51.111998
+edad integer,

# 2022-03-10 10:03:51.127370
+puntuacion integer

# 2022-03-10 10:04:02.627317
+create table alumno (

# 2022-03-10 10:04:29.017640
+create table alumno (carnet integer primary key,nombre text,codigo_de_carrera integer,edad integer,puntuacion integer);

# 2022-03-10 10:04:36.002112
+copy alumno from 'C:\datos_alumno.txt' using delimiters ';';

# 2022-03-10 10:07:11.861436
+create index indicearbolcarnet on alumno(carnet);

# 2022-03-10 10:07:23.986873
+select * from pg_relpages('indicearbolcarnet'::regclass);

# 2022-03-10 10:07:24.159360
+select * from pgstatindex('indicearbolcarnet');

# 2022-03-10 10:08:36.904445
+create extension pgstattuple;

# 2022-03-10 10:08:50.078486
+select * from pg_relpages('indicearbolcarnet'::regclass);

# 2022-03-10 10:08:55.438823
+select * from pgstatindex('indicearbolcarnet');

# 2022-03-10 10:08:56.970318
+select oid from pg_class where relname='indicearbolcarnet';

# 2022-03-10 10:09:17.071150
+
+

# 2022-03-10 10:09:26.467038
+select * from bt_page_stats('indicearbolcarnet',290);

# 2022-03-10 10:09:26.529404
+select * from bt_page_stats('indicearbolcarnet',289);

# 2022-03-10 10:09:26.576887
+select * from bt_page_stats('indicearbolcarnet',280);

# 2022-03-10 10:10:03.699937
+create extension pageinspect;

# 2022-03-10 10:10:30.834535
+select * from bt_page_stats('indicearbolcarnet',290);

# 2022-03-10 10:10:34.317614
+select * from bt_page_stats('indicearbolcarnet',289);

# 2022-03-10 10:10:39.411917
+select * from bt_page_stats('indicearbolcarnet',280);

# 2022-03-10 10:10:43.958525
+select * from bt_page_stats('indicearbolcarnet',290);

# 2022-03-10 10:11:03.115527
+-- This routine converts the hexadecimal data of an btree item in an integer number
+create or replace function hex_to_int(hexval varchar) returns bigint as $$
+DECLARE
+    result  bigint;
+    lenght int;
+    ciclos int;
+    hexval_invertido varchar;
+    hexval_no_spaces varchar;
+    carchar(2);
+BEGIN
+    SELECT replace(hexval,' ','') into hexval_no_spaces;
+--RAISE NOTICE 'hexval_no_invertido %',hexval_no_spaces;
+    lenght:=  char_length (hexval_no_spaces);
+    ciclos:= lenght/2;
+    if ciclos = 0 then
+        return null;
+    end if;
+    FOR i IN 1..ciclos LOOP
+        SELECT substr(hexval_no_spaces, (ciclos-i)*2+1, 2) into car;
+--RAISE NOTICE 'hexval_invertido %',car;
+        select concat(hexval_invertido,car) into hexval_invertido;
+    END LOOP;
+--RAISE NOTICE 'hexval_invertido %',hexval_invertido;
+    EXECUTE 'SELECT x' || quote_literal(hexval_invertido) || '::bigint' INTO result;
+    RETURN result;
+END;
+$$ language 'plpgsql';

# 2022-03-10 10:11:22.479396
+-- This routine converts the hexadecimal data of an btree item in an integer number
+create or replace function hex_to_int(hexval varchar) returns bigint as $$
+DECLARE
+    result  bigint;
+    lenght int;
+    ciclos int;
+    hexval_invertido varchar;
+    hexval_no_spaces varchar;
+    car char(2);
+BEGIN
+    SELECT replace(hexval,' ','') into hexval_no_spaces;
+--RAISE NOTICE 'hexval_no_invertido %',hexval_no_spaces;
+    lenght:=  char_length (hexval_no_spaces);
+    ciclos:= lenght/2;
+    if ciclos = 0 then
+        return null;
+    end if;
+    FOR i IN 1..ciclos LOOP
+        SELECT substr(hexval_no_spaces, (ciclos-i)*2+1, 2) into car;
+--RAISE NOTICE 'hexval_invertido %',car;
+        select concat(hexval_invertido,car) into hexval_invertido;
+    END LOOP;
+--RAISE NOTICE 'hexval_invertido %',hexval_invertido;
+    EXECUTE 'SELECT x' || quote_literal(hexval_invertido) || '::bigint' INTO result;
+    RETURN result;
+END;
+$$ language 'plpgsql';

# 2022-03-10 10:11:33.430466
+select *,hex_to_int(data) from bt_page_items('indicearbolcarnet',290);

# 2022-03-10 10:11:44.929808
+select *,hex_to_int(data) from bt_page_items('indicearbolcarnet',38195);

# 2022-03-10 10:11:56.430343
+select *,hex_to_int(data) from bt_page_items('indicearbolcarnet',38212);

# 2022-03-10 10:12:27.481448
+select * from pg_relpages('indicearbolpuntuacion'::regclass);

# 2022-03-10 10:12:27.497161
+select * from pgstatindex('indicearbolpuntuacion');

# 2022-03-10 10:13:09.119411
+create index indicearbolpuntuacionon alumno(puntuacion);

# 2022-03-10 10:13:21.807006
+create index indicearbolpuntuacionon on alumno(puntuacion);

# 2022-03-10 10:13:46.030434
+select * from pg_relpages('indicearbolpuntuacion'::regclass);

# 2022-03-10 10:13:46.061556
+select * from pgstatindex('indicearbolpuntuacion');

# 2022-03-10 10:14:01.898629
+create index indicearbolpuntuacion on alumno(puntuacion);

# 2022-03-10 10:14:21.001392
+drop index indicearbolpuntuacionon

# 2022-03-10 10:14:29.799850
+select * from pg_relpages('indicearbolpuntuacion'::regclass);

# 2022-03-10 10:14:29.831690
+select * from pgstatindex('indicearbolpuntuacion');

# 2022-03-10 10:14:31.253019
+select oid from pg_class where relname='indicearbolpuntuacion';

# 2022-03-10 10:14:46.770124
+select * from bt_page_stats('indicearbolpuntuacion',215);

# 2022-03-10 10:14:46.832980
+select * from bt_page_stats('indicearbolpuntuacion',213);

# 2022-03-10 10:14:46.895263
+select * from bt_page_stats('indicearbolpuntuacion',210);

# 2022-03-10 10:14:48.348644
+select * form bt_page_items('indicearbolpuntuacion',215);

# 2022-03-10 10:15:32.170024
+select * from bt_page_items('indicearbolpuntuacion',215);

# 2022-03-10 10:15:50.091872
+select *,hex_to_int(data) from bt_page_items('indicearbolpuntuacion',215);

# 2022-03-10 10:15:52.295546
+select *,hex_to_int(data) from bt_page_items('indicearbolcarnet',424);

# 2022-03-10 10:15:54.045049
+select *,hex_to_int(data) from bt_page_items('indicearbolcarnet',16);

# 2022-03-10 10:17:13.217726
+create index indicehashcarnet using hash(carnet);

# 2022-03-10 10:17:22.966683
+create index indicehashcarnet on hash(carnet);

# 2022-03-10 10:18:11.588933
+create index indicehashcarnet on hash (carnet);

# 2022-03-10 10:18:32.589510
+create index indicehashcarnet on alumno using hash (carnet);

# 2022-03-10 10:19:09.478909
+select oid from pg_class where='indicehashcarnet';

# 2022-03-10 10:19:39.176020
+select oid from pg_class where relname='indicehashcarnet';

# 2022-03-10 10:19:56.897683
+select relpages from pg_class where='indicehashcarnet';

# 2022-03-10 10:19:56.929391
+select pg_relation_size='indicehashcarnet';

# 2022-03-10 10:19:56.945246
+select * from pgstathashindex(24883);

# 2022-03-10 10:20:19.926799
+select * from hash_page_stats(get_raw_page('indicehashcarnet',2));

# 2022-03-10 10:21:05.910585
+select pg_relation_size ('indicehashcarnet');

# 2022-03-10 10:21:18.708944
+create index indicehashpuntuacion on alumno using hash(puntuacion);

# 2022-03-10 10:22:03.115117
+select oid from pg_class where relname='indicehashpuntuacion';

# 2022-03-10 10:22:03.146640
+select relpages from pg_class where relname='indicehashpuntuacion';

# 2022-03-10 10:22:04.209465
+select pg_relation_size('indicehashpuntuacion');

# 2022-03-10 10:22:19.396430
+select * from pgstathashindex(24884);

# 2022-03-10 10:22:21.803739
+select * from hash_page_stats(get_raw_page('indicehashpuntuacion',300));

# 2022-03-10 10:22:44.646496
+create table alumno3(carnet integer,nombre text,codigo_de_carrera integer,edad integer,puntuacion integer) PARTITION BY HASH (codigo_de_carrera);

# 2022-03-10 10:22:54.881695
+CREATE TABLE alumno3_0 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 0);

# 2022-03-10 10:22:54.928015
+CREATE TABLE alumno3_1 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 1);

# 2022-03-10 10:22:54.975801
+CREATE TABLE alumno3_2 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 2);

# 2022-03-10 10:22:55.022474
+CREATE TABLE alumno3_3 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 3);

# 2022-03-10 10:22:55.052882
+CREATE TABLE alumno3_4 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 4);

# 2022-03-10 10:22:55.100015
+CREATE TABLE alumno3_5 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 5);

# 2022-03-10 10:22:55.146860
+CREATE TABLE alumno3_6 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 6);

# 2022-03-10 10:22:55.178076
+CREATE TABLE alumno3_7 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 7);

# 2022-03-10 10:22:55.240414
+CREATE TABLE alumno3_8 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 8);

# 2022-03-10 10:22:55.287357
+CREATE TABLE alumno3_9 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 9);

# 2022-03-10 10:22:55.318561
+CREATE TABLE alumno3_10 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 10);

# 2022-03-10 10:22:55.381506
+CREATE TABLE alumno3_11 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 11);

# 2022-03-10 10:22:55.443790
+CREATE TABLE alumno3_12 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 12);

# 2022-03-10 10:22:55.506179
+CREATE TABLE alumno3_13 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 13);

# 2022-03-10 10:22:55.568461
+CREATE TABLE alumno3_14 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 14);

# 2022-03-10 10:22:55.646584
+CREATE TABLE alumno3_15 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 15);

# 2022-03-10 10:22:55.740708
+CREATE TABLE alumno3_16 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 16);

# 2022-03-10 10:22:55.866128
+CREATE TABLE alumno3_17 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 17);

# 2022-03-10 10:22:55.927989
+CREATE TABLE alumno3_18 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 18);

# 2022-03-10 10:22:56.053377
+CREATE TABLE alumno3_19 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 19);

# 2022-03-10 10:22:56.116449
+CREATE TABLE alumno3_20 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 20);

# 2022-03-10 10:22:56.193871
+CREATE TABLE alumno3_21 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 21);

# 2022-03-10 10:22:56.256582
+CREATE TABLE alumno3_22 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 22);

# 2022-03-10 10:22:56.319563
+CREATE TABLE alumno3_23 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 23);

# 2022-03-10 10:22:56.412593
+CREATE TABLE alumno3_24 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 24);

# 2022-03-10 10:22:56.521980
+CREATE TABLE alumno3_25 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 25);

# 2022-03-10 10:22:56.584451
+CREATE TABLE alumno3_26 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 26);

# 2022-03-10 10:22:56.725238
+CREATE TABLE alumno3_27 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 27);

# 2022-03-10 10:22:56.803010
+CREATE TABLE alumno3_28 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 28);

# 2022-03-10 10:23:09.474577
+CREATE TABLE alumno3_29 PARTITION OF alumno3 FOR VALUES WITH (modulus 30, remainder 29);

# 2022-03-10 10:23:11.146590
+create index indicehashcarnet on alumno using hash(carnet);

# 2022-03-10 10:23:11.178627
+create index indicehashpuntuacion on alumno using hash(puntuacion);

# 2022-03-10 10:23:17.508885
+create index indicearbolpuntuacion on alumno using btree(puntuacion);

# 2022-03-10 10:23:28.197009
+select pg_stat_reset();

# 2022-03-10 10:23:28.227950
+select * from alumno where carnet='23234566';

# 2022-03-10 10:23:29.679903
+select * from pg_statio_all_tables where relname=alumno;

# 2022-03-10 10:23:36.617635
+select * from pg_statio_all_tables where relname="alumno";

# 2022-03-10 10:23:40.898640
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:24:22.215337
+select pg_stat_reset();

# 2022-03-10 10:24:22.231081
+select * from alumno where carnet='23234566';

# 2022-03-10 10:24:22.262320
+select * from pg_statio_all_tables where relname=alumno;

# 2022-03-10 10:24:22.293451
+select pg_stat_reset();

# 2022-03-10 10:24:22.309883
+select * from alumno where puntuacion='3550';

# 2022-03-10 10:24:22.575076
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:24:22.653034
+select pg_stat_reset();

# 2022-03-10 10:24:22.684013
+select * from alumno where puntuacion<'300';

# 2022-03-10 10:24:26.012169
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:24:26.090969
+select pg_stat_reset();

# 2022-03-10 10:24:26.121956
+select * from alumno where nombre like '%135678%';

# 2022-03-10 10:24:27.902466
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:24:27.980951
+select pg_stat_reset();

# 2022-03-10 10:24:28.012677
+update alumno set puntuacion='2' where carnet='23567890';

# 2022-03-10 10:24:34.293962
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:24:34.372080
+select pg_stat_reset();

# 2022-03-10 10:24:34.403201
+select * from alumno where carnet='23567890' or carnet='21557891';

# 2022-03-10 10:24:34.450481
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:24:34.512451
+select pg_stat_reset();

# 2022-03-10 10:24:34.544092
+insert into alumno values( '99999999','alumnoXXXXXXXX','20','35','6529');

# 2022-03-10 10:24:49.314998
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:24:53.674492
+drop index indicehashcarnet;

# 2022-03-10 10:24:55.595872
+drop index indicehashpuntuacion;

# 2022-03-10 10:24:57.720475
+drop index indicearbolpuntuacion;

# 2022-03-10 10:25:03.392405
+create index indicemulti on alumno using btree(carnet,puntuacion);

# 2022-03-10 10:25:34.173392
+select pg_stat_reset();

# 2022-03-10 10:25:34.205498
+select * from alumno where carnet='13933295' or nombre='alumno25';

# 2022-03-10 10:25:34.814496
+select * from pg_statio_all_tables where relname=alumno;

# 2022-03-10 10:25:34.846367
+select pg_stat_reset();

# 2022-03-10 10:25:34.861612
+select * from alumno where carnet='19886862' and puntuacion='50';

# 2022-03-10 10:25:34.892940
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:25:34.970920
+select pg_stat_reset();

# 2022-03-10 10:25:35.002037
+select * from alumno where carnet='19886862' or puntuacion='50';

# 2022-03-10 10:25:37.392411
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:25:37.454989
+select pg_stat_reset();

# 2022-03-10 10:25:37.486541
+select * from alumno where puntuacion='60';

# 2022-03-10 10:25:39.892196
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:25:41.454621
+select pg_stat_reset();

# 2022-03-10 10:25:41.470893
+select * from alumno where carnet='13933295' or nombre='alumno25';

# 2022-03-10 10:25:42.079972
+select * from pg_statio_all_tables where relname=alumno;

# 2022-03-10 10:25:42.112316
+select pg_stat_reset();

# 2022-03-10 10:25:42.143056
+select * from alumno where carnet='19886862' and puntuacion='50';

# 2022-03-10 10:25:42.174052
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:25:42.252489
+select pg_stat_reset();

# 2022-03-10 10:25:42.283739
+select * from alumno where carnet='19886862' or puntuacion='50';

# 2022-03-10 10:25:44.454625
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:25:44.533222
+select pg_stat_reset();

# 2022-03-10 10:25:44.548948
+select * from alumno where puntuacion='60';

# 2022-03-10 10:25:47.204932
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:26:10.409061
+select pg_stat_reset();

# 2022-03-10 10:26:10.439890
+select * from alumno where carnet='13933295' or nombre='alumno25';

# 2022-03-10 10:26:11.048659
+select * from pg_statio_all_tables where relname='alumno';

# 2022-03-10 10:26:43.392388
+select pg_stat_reset();

# 2022-03-10 10:26:43.423688
+select * from alumno3 where codigo_de_carrera>12;

# 2022-03-10 10:26:43.455709
+select * from pg_statio_all_tables where relname='alumno3_0';

# 2022-03-10 10:26:43.548983
+select * from pg_statio_all_tables where relname='alumno3_1';

# 2022-03-10 10:26:43.611280
+select * from pg_statio_all_tables where relname='alumno3_2';

# 2022-03-10 10:26:43.673712
+select * from pg_statio_all_tables where relname='alumno3_3';

# 2022-03-10 10:26:43.751517
+select * from pg_statio_all_tables where relname='alumno3_4';

# 2022-03-10 10:26:43.814611
+select * from pg_statio_all_tables where relname='alumno3_5';

# 2022-03-10 10:26:43.893174
+select * from pg_statio_all_tables where relname='alumno3_6';

# 2022-03-10 10:26:43.955506
+select * from pg_statio_all_tables where relname='alumno3_7';

# 2022-03-10 10:26:44.033386
+select * from pg_statio_all_tables where relname='alumno3_8';

# 2022-03-10 10:26:44.111950
+select * from pg_statio_all_tables where relname='alumno3_9';

# 2022-03-10 10:26:44.173690
+select * from pg_statio_all_tables where relname='alumno3_10';

# 2022-03-10 10:26:44.236126
+select * from pg_statio_all_tables where relname='alumno3_11';

# 2022-03-10 10:26:44.314833
+select * from pg_statio_all_tables where relname='alumno3_12';

# 2022-03-10 10:26:44.392938
+select * from pg_statio_all_tables where relname='alumno3_13';

# 2022-03-10 10:26:44.454853
+select * from pg_statio_all_tables where relname='alumno3_14';

# 2022-03-10 10:26:44.533476
+select * from pg_statio_all_tables where relname='alumno3_15';

# 2022-03-10 10:26:44.610993
+select * from pg_statio_all_tables where relname='alumno3_16';

# 2022-03-10 10:26:44.673767
+select * from pg_statio_all_tables where relname='alumno3_17';

# 2022-03-10 10:26:44.752365
+select * from pg_statio_all_tables where relname='alumno3_18';

# 2022-03-10 10:26:44.814520
+select * from pg_statio_all_tables where relname='alumno3_19';

# 2022-03-10 10:26:44.877231
+select * from pg_statio_all_tables where relname='alumno3_20';

# 2022-03-10 10:26:44.939145
+select * from pg_statio_all_tables where relname='alumno3_21';

# 2022-03-10 10:26:45.001541
+select * from pg_statio_all_tables where relname='alumno3_22';

# 2022-03-10 10:26:45.096015
+select * from pg_statio_all_tables where relname='alumno3_23';

# 2022-03-10 10:26:45.174509
+select * from pg_statio_all_tables where relname='alumno3_24';

# 2022-03-10 10:26:45.236291
+select * from pg_statio_all_tables where relname='alumno3_25';

# 2022-03-10 10:26:45.299029
+select * from pg_statio_all_tables where relname='alumno3_26';

# 2022-03-10 10:26:45.361206
+select * from pg_statio_all_tables where relname='alumno3_27';

# 2022-03-10 10:26:45.440574
+select * from pg_statio_all_tables where relname='alumno3_28';

# 2022-03-10 10:26:47.394061
+select * from pg_statio_all_tables where relname='alumno3_29';

# 2022-03-10 10:26:55.189112
+select pg_stat_reset();

# 2022-03-10 10:26:55.220855
+select * from alumno3 where codigo_de_carrera=12 or codigo_de_carrera=6;

# 2022-03-10 10:26:55.252172
+select * from pg_statio_all_tables where relname='alumno3_0';

# 2022-03-10 10:26:55.330073
+select * from pg_statio_all_tables where relname='alumno3_1';

# 2022-03-10 10:26:55.392455
+select * from pg_statio_all_tables where relname='alumno3_2';

# 2022-03-10 10:26:55.455057
+select * from pg_statio_all_tables where relname='alumno3_3';

# 2022-03-10 10:26:55.517362
+select * from pg_statio_all_tables where relname='alumno3_4';

# 2022-03-10 10:26:55.580728
+select * from pg_statio_all_tables where relname='alumno3_5';

# 2022-03-10 10:26:55.642261
+select * from pg_statio_all_tables where relname='alumno3_6';

# 2022-03-10 10:26:55.705158
+select * from pg_statio_all_tables where relname='alumno3_7';

# 2022-03-10 10:26:55.767265
+select * from pg_statio_all_tables where relname='alumno3_8';

# 2022-03-10 10:26:55.862018
+select * from pg_statio_all_tables where relname='alumno3_9';

# 2022-03-10 10:26:55.923795
+select * from pg_statio_all_tables where relname='alumno3_10';

# 2022-03-10 10:26:55.985995
+select * from pg_statio_all_tables where relname='alumno3_11';

# 2022-03-10 10:26:56.065255
+select * from pg_statio_all_tables where relname='alumno3_12';

# 2022-03-10 10:26:56.127545
+select * from pg_statio_all_tables where relname='alumno3_13';

# 2022-03-10 10:26:56.189211
+select * from pg_statio_all_tables where relname='alumno3_14';

# 2022-03-10 10:26:56.252033
+select * from pg_statio_all_tables where relname='alumno3_15';

# 2022-03-10 10:26:56.314792
+select * from pg_statio_all_tables where relname='alumno3_16';

# 2022-03-10 10:26:56.408711
+select * from pg_statio_all_tables where relname='alumno3_17';

# 2022-03-10 10:26:56.471366
+select * from pg_statio_all_tables where relname='alumno3_18';

# 2022-03-10 10:26:56.533615
+select * from pg_statio_all_tables where relname='alumno3_19';

# 2022-03-10 10:26:56.611371
+select * from pg_statio_all_tables where relname='alumno3_20';

# 2022-03-10 10:26:56.673553
+select * from pg_statio_all_tables where relname='alumno3_21';

# 2022-03-10 10:26:56.736015
+select * from pg_statio_all_tables where relname='alumno3_22';

# 2022-03-10 10:26:56.799355
+select * from pg_statio_all_tables where relname='alumno3_23';

# 2022-03-10 10:26:56.861315
+select * from pg_statio_all_tables where relname='alumno3_24';

# 2022-03-10 10:26:56.939282
+select * from pg_statio_all_tables where relname='alumno3_25';

# 2022-03-10 10:26:57.002261
+select * from pg_statio_all_tables where relname='alumno3_26';

# 2022-03-10 10:26:57.096081
+select * from pg_statio_all_tables where relname='alumno3_27';

# 2022-03-10 10:26:57.158248
+select * from pg_statio_all_tables where relname='alumno3_28';

# 2022-03-10 10:26:57.220831
+select * from pg_statio_all_tables where relname='alumno3_29';

# 2022-03-10 10:26:57.314365
+select pg_stat_reset();

# 2022-03-10 10:26:57.345611
+select * from alumno3 where codigo_de_carrera>10 and codigo_de_carrera<15;

# 2022-03-10 10:26:57.377042
+select * from pg_statio_all_tables where relname='alumno3_0';

# 2022-03-10 10:26:57.455078
+select * from pg_statio_all_tables where relname='alumno3_1';

# 2022-03-10 10:26:57.518076
+select * from pg_statio_all_tables where relname='alumno3_2';

# 2022-03-10 10:26:57.580271
+select * from pg_statio_all_tables where relname='alumno3_3';

# 2022-03-10 10:26:57.626436
+select * from pg_statio_all_tables where relname='alumno3_4';

# 2022-03-10 10:26:57.689466
+select * from pg_statio_all_tables where relname='alumno3_5';

# 2022-03-10 10:26:57.752209
+select * from pg_statio_all_tables where relname='alumno3_6';

# 2022-03-10 10:26:57.814648
+select * from pg_statio_all_tables where relname='alumno3_7';

# 2022-03-10 10:26:57.877199
+select * from pg_statio_all_tables where relname='alumno3_8';

# 2022-03-10 10:26:57.955847
+select * from pg_statio_all_tables where relname='alumno3_9';

# 2022-03-10 10:26:58.033284
+select * from pg_statio_all_tables where relname='alumno3_10';

# 2022-03-10 10:26:58.096060
+select * from pg_statio_all_tables where relname='alumno3_11';

# 2022-03-10 10:26:58.158235
+select * from pg_statio_all_tables where relname='alumno3_12';

# 2022-03-10 10:26:58.220830
+select * from pg_statio_all_tables where relname='alumno3_13';

# 2022-03-10 10:26:58.283487
+select * from pg_statio_all_tables where relname='alumno3_14';

# 2022-03-10 10:26:58.345984
+select * from pg_statio_all_tables where relname='alumno3_15';

# 2022-03-10 10:26:58.408666
+select * from pg_statio_all_tables where relname='alumno3_16';

# 2022-03-10 10:26:58.486403
+select * from pg_statio_all_tables where relname='alumno3_17';

# 2022-03-10 10:26:58.549427
+select * from pg_statio_all_tables where relname='alumno3_18';

# 2022-03-10 10:26:58.611626
+select * from pg_statio_all_tables where relname='alumno3_19';

# 2022-03-10 10:26:58.673904
+select * from pg_statio_all_tables where relname='alumno3_20';

# 2022-03-10 10:26:58.736721
+select * from pg_statio_all_tables where relname='alumno3_21';

# 2022-03-10 10:26:58.798945
+select * from pg_statio_all_tables where relname='alumno3_22';

# 2022-03-10 10:26:58.861523
+select * from pg_statio_all_tables where relname='alumno3_23';

# 2022-03-10 10:26:58.923896
+select * from pg_statio_all_tables where relname='alumno3_24';

# 2022-03-10 10:26:59.017903
+select * from pg_statio_all_tables where relname='alumno3_25';

# 2022-03-10 10:26:59.080433
+select * from pg_statio_all_tables where relname='alumno3_26';

# 2022-03-10 10:26:59.142663
+select * from pg_statio_all_tables where relname='alumno3_27';

# 2022-03-10 10:26:59.204993
+select * from pg_statio_all_tables where relname='alumno3_28';

# 2022-03-10 10:26:59.267299
+select * from pg_statio_all_tables where relname='alumno3_29';

# 2022-03-10 10:27:07.142553
+exit

# 2022-03-10 11:04:03.854861
+\c pl1;

# 2022-03-10 11:04:07.777836
+\d

# 2022-03-10 11:04:16.055852
+exit

# 2022-03-10 11:04:23.319320
+\d

# 2022-03-10 11:04:50.549383
+select * from pgstattupple(alumno);

# 2022-03-10 11:05:23.544138
+select * from pgstattupple('alumno');

# 2022-03-10 11:05:32.895743
+create extension pgstattuple;

# 2022-03-10 11:05:34.782070
+select * from pgstattupple('alumno');

# 2022-03-10 11:05:54.937587
+select * from pgstattuple('alumno');

# 2022-03-10 11:09:58.486223
+exit

# 2022-03-15 08:36:42.879491
+\c pl1;

# 2022-03-15 08:36:45.032437
+\d

# 2022-03-15 08:36:54.383424
+select paco;

# 2022-03-15 08:36:56.941508
+exit

# 2022-03-15 09:37:04.502997
+\c 

# 2022-03-15 09:37:09.065231
+\c pl1;

# 2022-03-15 09:37:10.613539
+\d

# 2022-03-15 09:37:21.612415
+create table estudiantes(

# 2022-03-15 09:38:29.315197
+create table estudiantes(carnet numeric PRIMARY key,nombre text,apellidos text,creditos numeric);

# 2022-03-15 09:39:16.237409
+create table asignaturas(codigo numeric PRIMARY KEY,nombre text,caracter text,creditos numeric);

# 2022-03-15 09:45:21.686079
+create table matriculas(
+carnet_estu numeric,
+codigo_asig numeric,
+nota numeric,
+constraint fk_carnet foreign key(carnet_estu) references estudiantes(carnet) on delete restrict on update restrict,
+constraint fk_codigo foreign key(codigo_asig) references asignatuas(codigo) on delete restrict on update restrict,
+constraint pk_matricula primary key(carnet_estu,codigo_asig));

# 2022-03-15 09:45:32.717894
+create table matriculas(
+carnet_estu numeric,
+codigo_asig numeric,
+nota numeric,
+constraint fk_carnet foreign key(carnet_estu) references estudiantes(carnet) on delete restrict on update restrict,
+constraint fk_codigo foreign key(codigo_asig) references asignaturas(codigo) on delete restrict on update restrict,
+constraint pk_matricula primary key(carnet_estu,codigo_asig));

# 2022-03-15 09:45:49.873915
+select * from matriculas;

# 2022-03-15 09:55:46.072593
+copy estudiantes from 'c:\datos_estudiantes.csv' using delimiters ';';

# 2022-03-15 09:56:31.072780
+copy estudiantes from 'c:\datos_estudiantes.csv' using delimiters ',';

# 2022-03-15 09:58:06.729344
+copy asignaturas from 'c:\datos_asignaturas.csv' using delimiters ',';

# 2022-03-15 09:58:38.698132
+copy matriculas from 'c:\datos_matriculas.csv' using delimiters ',';

# 2022-03-16 15:29:30.800423
+select * from pgclass where relname='estudiantes';

# 2022-03-16 15:29:35.692006
+select * from pg_class where relname='estudiantes';

# 2022-03-16 15:29:47.583053
+\o salida.txt

# 2022-03-16 15:29:53.628707
+select * from pg_class where relname='estudiantes';

# 2022-03-16 15:33:52.082743
+select * from pg_class where relname='estudiantes' or relname='asignaturas' or relname='matriculas';

# 2022-03-16 15:36:34.222368
+select * from pg_stat where relname='estudiantes' or relname='asignaturas' or relname='matriculas';

# 2022-03-16 15:36:55.127853
+\o

# 2022-03-16 15:36:58.346531
+select * from pg_stat where relname='estudiantes' or relname='asignaturas' or relname='matriculas';

# 2022-03-16 15:37:25.644774
+select * from pg_stats where relname='estudiantes' or relname='asignaturas' or relname='matriculas';

# 2022-03-16 15:38:16.721892
+select * from pg_stats where tablename='estudiantes' or tablename='asignaturas' or tablename='matriculas';

# 2022-03-16 15:38:54.770469
+\o salida.txt

# 2022-03-16 15:39:02.348414
+select * from pg_stats where tablename='estudiantes' or tablename='asignaturas' or tablename='matriculas';

# 2022-03-17 11:22:46.559650
+\c pl1;

# 2022-03-17 11:22:49.201219
+\o salida.txt

# 2022-03-17 11:22:52.028601
+explain select count(*) from alumnos where creditos>200;

# 2022-03-17 11:23:17.915951
+explain select count(*) from estudiantes where creditos>200;

# 2022-03-17 11:32:32.427251
+exit

# 2022-03-17 11:33:00.195714
+\c pl1;

# 2022-03-17 11:33:07.731579
+\o salida.txt

# 2022-03-17 11:33:09.765296
+explain select count(*) from estudiantes where creditos>200;

# 2022-03-17 11:39:09.545065
+\o

# 2022-03-17 11:39:20.613328
+select count(*) from estudiantes;

# 2022-03-17 11:40:02.156513
+select count(*) from estudiantes group by creditos;

# 2022-03-17 11:41:42.882731
+select count(distinct creditos)  from estudiantes; 

# 2022-03-17 11:43:27.165763
+select count(distinct creditos)  from estudiantes where creditos>200; 

# 2022-03-17 11:48:50.197313
+ select count(*) from estudiantes where creditos>200;

# 2022-03-17 11:49:58.228348
+explain analyze select count(*) from estudiantes where creditos>200;

# 2022-03-17 12:12:46.016523
+ select count(*) from estudiantes where creditos>200;

# 2022-03-17 12:15:18.526258
+drop table matriculas;

# 2022-03-17 12:15:50.807865
+ create table matriculas(
+
+   carnet_estu numeric ,
+
+   codigo_asig numeric ,
+
+   nota numeric,
+
+   constraint fk_carnet FOREIGN KEY(carnet_estu) references estudiantes (carnet) on delete restrict on update restrict  ,
+
+   constraint fk_codigo FOREIGN KEY(codigo_asig) references asignaturas(codigo) on delete restrict on update restrict ,
+
+   constraint pk_matriculaPRIMARI KEY(carnet_estu,codigo_asig)
+
+    );

# 2022-03-17 12:16:32.535470
+ create table matriculas(
+
+   carnet_estu numeric ,
+
+   codigo_asig numeric ,
+
+   nota numeric,
+
+   constraint fk_carnet FOREIGN KEY(carnet_estu) references estudiantes (carnet) on delete restrict on update restrict  ,
+
+   constraint fk_codigo FOREIGN KEY(codigo_asig) references asignaturas(codigo) on delete restrict on update restrict ,
+
+   constraint pk_matricula PRIMARy KEY(carnet_estu,codigo_asig)
+
+    );

# 2022-03-17 12:16:46.677731
+copy matriculas from 'C:\datos_matriculas.csv' using delimiters ',';

# 2022-03-17 12:27:32.722297
+ select count(*) from estudiantes where creditos>200;

# 2022-03-17 12:27:49.159936
+explain analyze select count(*) from estudiantes where creditos>200;

# 2022-03-17 12:30:22.051187
+select * from pg_stats where  tablename='matriculas';

# 2022-03-17 12:30:28.847841
+\o salida.txt

# 2022-03-17 12:30:30.239035
+select * from pg_stats where  tablename='matriculas';

# 2022-03-17 12:30:31.581949
+\o

# 2022-03-17 12:31:43.771196
+select * from pgclass where relname='estudiantes';

# 2022-03-17 12:31:49.146248
+select * from pg_class where relname='estudiantes';

# 2022-03-17 12:31:53.021780
+\o salida.txt

# 2022-03-17 12:31:54.740382
+select * from pg_class where relname='estudiantes';

# 2022-03-17 12:31:55.897716
+\o

# 2022-03-17 12:42:54.584729
+SELECT sum(pg_column_size(t.*)) as filesize, count(*) as filerow FROM estudiantes as t;

# 2022-03-17 12:44:43.461683
+explain analyze select count(*) from estudiantes where creditos>200;

# 2022-03-17 12:48:21.586667
+explain analyze select * from estudiantes ;

# 2022-03-17 12:48:35.492361
+explain analyze select count(*) from estudiantes where creditos<20000;

# 2022-03-17 12:48:51.726585
+explain analyze select count(*) from estudiantes where creditos<99999;

# 2022-03-17 12:55:54.161536
+select nombre from estudiantes join matriculas where creditos=180 and ;

# 2022-03-17 12:56:15.490061
+select * from estudiantes;

# 2022-03-17 12:56:51.897266
+select nombre from estudiantes join matriculas where creditos=180 and carnet=1;

# 2022-03-17 12:58:05.176907
+select nombre from estudiantes inner join matriculas on estudiantes.carnet = matriculas.carnet_estu where creditos=180 and carnet=1;

# 2022-03-17 12:58:18.975348
+select nombre from estudiantes inner join matriculas on estudiantes.carnet = matriculas.carnet_estu where creditos=180;

# 2022-03-17 12:59:26.506987
+select * from matriculas;

# 2022-03-17 12:59:52.724525
+select * from matriculas where carnet_estu=1;

# 2022-03-17 13:00:26.537015
+select nombre from estudiantes inner join matriculas on estudiantes.carnet = matriculas.carnet_estu where creditos=180 and matticulas.nota<5;

# 2022-03-17 13:00:32.927485
+select nombre from estudiantes inner join matriculas on estudiantes.carnet = matriculas.carnet_estu where creditos=180 and matriculas.nota<5;

# 2022-03-17 13:00:48.317570
+select distinct nombre from estudiantes inner join matriculas on estudiantes.carnet = matriculas.carnet_estu where creditos=180 and matriculas.nota<5;

# 2022-03-17 13:02:21.630011
+explain analyze select distinct nombre from estudiantes inner join matriculas on estudiantes.carnet = matriculas.carnet_estu where creditos=180 and matriculas.nota<5;

# 2022-03-17 13:07:24.474336
+select distinct count(*) from matriculas;

# 2022-03-17 13:07:45.880202
+select distinct count(nota) from matriculas;

# 2022-03-17 13:08:04.413111
+select distinct count(*) from matriculas group by nota;

# 2022-03-17 13:08:21.084582
+select distinct nota from matricula;

# 2022-03-17 13:08:36.614360
+select distinct count(nota) from matricula;

# 2022-03-17 13:08:40.600356
+select distinct count(nota) from matriculas;

# 2022-03-17 13:09:07.224208
+select count(distinct nota) from matriculas;

# 2022-03-17 13:09:24.333443
+select count(distinct carnet_estu) from matriculas;

# 2022-03-17 13:09:54.426937
+select count(distinct creditos) from estudiantes;

# 2022-03-17 13:10:04.129997
+select count(distinct nombre) from estudiantes;

# 2022-03-17 13:10:39.537719
+select count(distinct nota) from matriculas where nota <5;

# 2022-03-17 13:16:38.950978
+select distinct nombre from estudiantes inner join matriculas on estudiantes.carnet = matriculas.carnet_estu where creditos=180 and matriculas.nota<5;

# 2022-03-17 13:16:53.132041
+select count(distinct nombre) from estudiantes inner join matriculas on estudiantes.carnet = matriculas.carnet_estu where creditos=180 and matriculas.nota<5;

# 2022-03-17 13:37:15.489472
+select distinct nombre from asignaturas inner join estudiantes on estudiantes.creditos = asignaturas.creditos inner join matriculas on matriculas.codigo_asig = asignaturas.codigo  where asignaturas.creditos=60 and matriculas.nota=8;

# 2022-03-17 13:37:43.303727
+select distinct asignaturas.nombre from asignaturas inner join estudiantes on estudiantes.creditos = asignaturas.creditos inner join matriculas on matriculas.codigo_asig = asignaturas.codigo  where asignaturas.creditos=60 and matriculas.nota=8;

# 2022-03-17 13:38:48.786949
+select distinct asignaturas.nombre from asignaturas inner join matriculas on matriculas.codigo_asig = asignaturas.codigo inner join estudiantes ON estudiantes.carnet = matriculas.carnet_estu  where asignaturas.creditos=60 and matriculas.nota=8;

# 2022-03-17 13:39:54.223991
+select distinct asignaturas.nombre from asignaturas inner join matriculas on matriculas.codigo_asig = asignaturas.codigo inner join estudiantes ON estudiantes.carnet = matriculas.carnet_estu  where estudiantes.creditos=60 and matriculas.nota=8;

# 2022-03-17 13:40:26.038217
+explain analyze select distinct asignaturas.nombre from asignaturas inner join matriculas on matriculas.codigo_asig = asignaturas.codigo inner join estudiantes ON estudiantes.carnet = matriculas.carnet_estu  where asignaturas.creditos=60 and matriculas.nota=8;

# 2022-03-17 13:40:48.602493
+select count(distinct asignaturas.nombre) from asignaturas inner join matriculas on matriculas.codigo_asig = asignaturas.codigo inner join estudiantes ON estudiantes.carnet = matriculas.carnet_estu  where asignaturas.creditos=60 and matriculas.nota=8;

# 2022-03-17 13:42:35.561395
+explain analyze select distinct asignaturas.nombre from asignaturas inner join matriculas on matriculas.codigo_asig = asignaturas.codigo inner join estudiantes ON estudiantes.carnet = matriculas.carnet_estu  where estudiantes.creditos=60 and matriculas.nota=8;

# 2022-03-17 13:42:53.844218
+select count(distinct asignaturas.nombre) from asignaturas inner join matriculas on matriculas.codigo_asig = asignaturas.codigo inner join estudiantes ON estudiantes.carnet = matriculas.carnet_estu  where estudiantes.creditos=60 and matriculas.nota=8;

# 2022-03-17 13:52:07.003844
+selcet count(distinct codigo_asig) from matriculas;

# 2022-03-17 13:52:13.534289
+select count(distinct codigo_asig) from matriculas;

# 2022-03-17 13:56:14.956558
+select count(distinct codigo) from asignaturas;

# 2022-03-17 13:56:41.895636
+select count(distinct nombre) from asignaturas;

# 2022-03-17 13:57:01.112431
+select count(*) from asignaturas;

# 2022-03-17 13:59:20.269248
+select count(*) from estudiantes;

# 2022-03-17 14:04:42.003141
+select count(distinct creditos) from asignaturas;

# 2022-03-17 14:05:47.987516
+select count(distinct nombre) from asignaturas;

# 2022-03-17 14:10:43.753428
+select count(*) from estudiantes;

# 2022-03-17 14:10:53.159928
+select count(distinct nombre) from asignaturas;

# 2022-03-17 14:11:09.737977
+select count(distinct nombre) from estudiantes;

# 2022-03-17 14:11:21.925973
+select count(distinct carnet) from estudiantes;

# 2022-03-17 14:11:28.738343
+select count(distinct creditos) from estudiantes;

# 2022-03-17 14:13:07.784297
+explain analyze select distinct asignaturas.nombre from asignaturas inner join matriculas on matriculas.codigo_asig = asignaturas.codigo inner join estudiantes ON estudiantes.carnet = matriculas.carnet_estu  where estudiantes.creditos=60 and matriculas.nota=8 and asignaturas.creditos=6;

# 2022-03-17 14:13:33.707142
+ select count(distinct asignaturas.nombre) from asignaturas inner join matriculas on matriculas.codigo_asig = asignaturas.codigo inner join estudiantes ON estudiantes.carnet = matriculas.carnet_estu  where estudiantes.creditos=60 and matriculas.nota=8 and asignaturas.creditos=6;

# 2022-03-20 16:11:07.127856
+\d

# 2022-03-20 16:11:11.518349
+CREATE TABLE public.estudiantes (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-03-20 16:11:30.143576
+CREATE TABLE estudiantes2 (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-03-20 16:12:05.752707
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL,
+                            CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)
+                            );

# 2022-03-20 16:12:18.128247
+CREATE TABLE public.asignaturas (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-03-20 16:12:28.612000
+CREATE TABLE asignaturas2 (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-03-20 16:12:40.081166
+CREATE TABLE public.asignaturas (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+         ;

# 2022-03-20 16:12:58.331056
+CREATE TABLE public.estancias (
+    fecha_inicio date NOT NULL,
+        fecha_fin date NOT NULL,
+            tipo_beca text NOT NULL,
+                duracion char(1) NOT NULL,
+                    cuantia real NOT NULL,
+                        estudiante integer NOT NULL,
+                            universidad integer NOT NULL,
+                                CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)
+                                );

# 2022-03-20 16:13:09.909197
+CREATE TABLE public.convalidaciones (
+    nota_destino char(2) NOT NULL,
+        nota_origen real NOT NULL,
+            fecha date NOT NULL,
+                estudiante_estancias integer NOT NULL,
+                    universidad_estancias integer NOT NULL,
+                        asignatura_origen integer NOT NULL,
+                            asignatura_destino integer NOT NULL,
+                                CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)
+                                );

# 2022-03-20 16:15:24.938550
+copy estudiantes2 from 'C:\estudiantes.csv' using delimiters ',';

# 2022-03-20 16:16:51.735195
+copy universidades from 'C:\universidades.csv' using delimiters ',';

# 2022-03-20 16:17:11.438178
+select * from universidades
+;

# 2022-03-20 16:23:04.389280
+copy universidades from 'C:\universidades.csv' using delimiters ',';

# 2022-03-20 16:25:05.061100
+copy asignaturas2 from 'C:\asignaturas.csv' using delimiters ',';

# 2022-03-20 16:32:06.329879
+copy estancias from 'C:\estancias.csv' using delimiters ',';

# 2022-03-21 11:51:35.154785
+\c pl1;

# 2022-03-21 11:53:20.889121
+select * from pgclass where relname='estudiantes';

# 2022-03-21 11:53:25.747143
+select * from pg_class where relname='estudiantes';

# 2022-03-21 11:53:32.809680
+\o salida.txt

# 2022-03-21 11:53:35.169154
+select * from pg_class where relname='estudiantes';

# 2022-03-21 11:53:36.481687
+\o

# 2022-03-21 11:55:02.699983
+select * from pg_statictics where starelid=25039;

# 2022-03-21 11:55:11.856148
+create extension pg_statictics

# 2022-03-21 11:55:15.404115
+create extension pgstatictics

# 2022-03-21 11:55:52.731441
+select * from pg_stats where starelid=25039;

# 2022-03-21 11:56:16.293961
+select * from pg_stats where tablename='estudiantes';

# 2022-03-21 11:56:19.996983
+\o salida.txt

# 2022-03-21 11:56:21.107425
+select * from pg_stats where tablename='estudiantes';

# 2022-03-21 11:58:54.261344
+
+explain analyze select distinct asignaturas.nombre from asignaturas inner join matriculas on matriculas.codigo_asig=asignaturas.codigo inner join estudiantes on estudiantes.carnet=matriculas.carnet_estu where estudiantes.creditos=60 and matriculas.nota=8 and asignaturas.creditos=6;

# 2022-03-21 12:02:13.763360
+select * from pg_stats where tablename='matriculas';

# 2022-03-21 12:03:36.191006
+select count(*) from matriculas;

# 2022-03-21 12:08:19.990765
+
+explain analyze select distinct asignaturas.nombre from asignaturas inner join matriculas on matriculas.codigo_asig=asignaturas.codigo inner join estudiantes on estudiantes.carnet=matriculas.carnet_estu where asignaturas.creditos=6;

# 2022-03-21 12:08:38.995662
+ select distinct asignaturas.nombre from asignaturas inner join matriculas on matriculas.codigo_asig=asignaturas.codigo inner join estudiantes on estudiantes.carnet=matriculas.carnet_estu where asignaturas.creditos=6;

# 2022-03-21 12:11:53.050911
+ select distinct asignaturas.nombre from asignaturas inner join matriculas on matriculas.codigo_asig=asignaturas.codigo inner join estudiantes on estudiantes.carnet=matriculas.carnet_estu where estudiantes.creditos=60 and matriculas.nota=8 and asignaturas.creditos=6;

# 2022-03-21 18:36:58.690241
+\c pl1;

# 2022-03-21 18:37:00.043857
+\d

# 2022-03-21 18:37:36.470543
+copy estancias from 'C:\convalidaciones.csv' using delimiters ',';

# 2022-03-21 18:39:59.761280
+copy convalidaciones from 'C:\convalidaciones.csv' using delimiters ',';

# 2022-03-21 18:40:11.337867
+select * from convalidaciones;

# 2022-03-21 18:40:30.318728
+exit

# 2022-03-22 08:29:40.913579
+\c pl1;

# 2022-03-22 08:29:54.512021
+explain select distinct asignaturas.nombre 
+        from asignaturas inner join matriculas on matriculas.codigo_asig=asignaturas.codigo
+                                         inner join estudiantes on estudiantes.carnet=matriculas.carnet_estu 
+        where estudiantes.creditos=60 and matriculas.nota=8 and asignaturas.creditos=6;

# 2022-03-22 08:29:59.512443
+\o salida.txt

# 2022-03-22 08:30:01.277594
+explain select distinct asignaturas.nombre 
+        from asignaturas inner join matriculas on matriculas.codigo_asig=asignaturas.codigo
+                                         inner join estudiantes on estudiantes.carnet=matriculas.carnet_estu 
+        where estudiantes.creditos=60 and matriculas.nota=8 and asignaturas.creditos=6;

# 2022-03-22 08:30:04.856494
+\o

# 2022-03-22 08:31:28.570927
+\o salida.txt

# 2022-03-22 08:31:31.618159
+explain analyze select distinct nombre from estudiantes inner join matriculas on estudiantes.carnet = matriculas.carnet_estu where creditos=180 and matriculas.nota<5;

# 2022-03-22 08:31:43.095166
+\o

# 2022-03-22 08:32:42.072283
+\o salida.txt

# 2022-03-22 08:32:51.930825
+explain select distinct nombre from estudiantes inner join matriculas on estudiantes.carnet = matriculas.carnet_estu where creditos=180 and matriculas.nota<5;

# 2022-03-22 08:32:54.509414
+\o

# 2022-03-22 08:56:51.897812
+\c pl1;

# 2022-03-22 08:56:56.438914
+\o salida.txt

# 2022-03-22 08:57:13.359964
+select * from pg_stats where tablename='asignaturas';

# 2022-03-22 08:57:14.797897
+\o

# 2022-03-22 08:57:16.549296
+select * from pg_stats where tablename='asignaturas';

# 2022-03-22 08:57:48.758417
+select count(*) from asignaturas;

# 2022-03-22 08:59:30.540381
+\d

# 2022-03-22 08:59:44.291880
+drop table asignaturas;

# 2022-03-22 08:59:50.931981
+drop table asignaturas2;

# 2022-03-22 08:59:58.714305
+drop table estudiantes;

# 2022-03-22 09:00:12.291876
+drop  cascade table estudiantes;

# 2022-03-22 09:00:18.010037
+drop table estudiantes cascade;

# 2022-03-22 09:00:21.683063
+\d

# 2022-03-22 09:00:32.089960
+drop table asignaturas cascade;

# 2022-03-22 09:00:34.761352
+\d

# 2022-03-22 09:00:41.863582
+drom table convalidaciones;

# 2022-03-22 09:00:47.255542
+drop table convalidaciones;

# 2022-03-22 09:00:54.691631
+drop table estancias;

# 2022-03-22 09:01:02.910062
+drop table estudiantes2;

# 2022-03-22 09:01:09.706895
+drop table matriculas;

# 2022-03-22 09:01:12.442292
+\d

# 2022-03-22 09:01:19.985738
+drop table universidades;

# 2022-03-22 09:01:22.143222
+\d

# 2022-03-22 09:07:30.438729
+-- Database generated with pgModeler (PostgreSQL Database Modeler).

# 2022-03-22 09:07:30.470223
+-- pgModeler version: 0.9.4

# 2022-03-22 09:07:30.485859
+-- PostgreSQL version: 13.0

# 2022-03-22 09:07:30.501634
+-- Project Site: pgmodeler.io

# 2022-03-22 09:07:30.517785
+-- Model Author: ---

# 2022-03-22 09:07:30.548375
+-- Database creation must be performed outside a multi lined SQL file. 

# 2022-03-22 09:07:30.579660
+-- These commands were put in this file only as a convenience.

# 2022-03-22 09:07:30.595587
+-- 

# 2022-03-22 09:07:30.610379
+-- object: new_database | type: DATABASE --

# 2022-03-22 09:07:30.642362
+-- DROP DATABASE IF EXISTS new_database;

# 2022-03-22 09:07:30.657950
+CREATE DATABASE new_database;

# 2022-03-22 09:07:32.439784
+-- ddl-end --

# 2022-03-22 09:07:32.485236
+-- object: public.estudiantes | type: TABLE --

# 2022-03-22 09:07:32.501231
+-- DROP TABLE IF EXISTS public.estudiantes CASCADE;

# 2022-03-22 09:07:32.532848
+CREATE TABLE public.estudiantes (

# 2022-03-22 09:07:32.580258
+codigo_estudiante integer NOT NULL,

# 2022-03-22 09:07:32.673820
+nombre text NOT NULL,

# 2022-03-22 09:07:32.688986
+apellidos text NOT NULL,

# 2022-03-22 09:07:32.720013
+direccion text NOT NULL,

# 2022-03-22 09:07:32.736191
+pais text NOT NULL,

# 2022-03-22 09:07:32.751894
+telefono bigint NOT NULL,

# 2022-03-22 09:07:32.767120
+email text NOT NULL,

# 2022-03-22 09:07:32.782533
+creditos_aprobados integer NOT NULL,

# 2022-03-22 09:07:32.814229
+codigo_erasmus_universidades integer,

# 2022-03-22 09:07:32.861503
+CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)

# 2022-03-22 09:07:32.876598
+);

# 2022-03-22 09:07:32.892277
+-- ddl-end --

# 2022-03-22 09:07:32.939984
+COMMENT ON TABLE public.estudiantes IS E'Guarda los estudiantes que solicitan becas para realizar estancias en universidades distintas de donde estn matriculados.';

# 2022-03-22 09:07:32.954331
+-- ddl-end --

# 2022-03-22 09:07:33.001795
+COMMENT ON COLUMN public.estudiantes.codigo_estudiante IS E'Guarda el cdigo del estudiante.';

# 2022-03-22 09:07:33.017426
+-- ddl-end --

# 2022-03-22 09:07:33.049042
+COMMENT ON COLUMN public.estudiantes.nombre IS E'Guarda el nombre del estudiante';

# 2022-03-22 09:07:33.064040
+-- ddl-end --

# 2022-03-22 09:07:33.095434
+COMMENT ON COLUMN public.estudiantes.apellidos IS E'Guarda los apellidos del estudiante.';

# 2022-03-22 09:07:33.111088
+-- ddl-end --

# 2022-03-22 09:07:33.142190
+COMMENT ON COLUMN public.estudiantes.direccion IS E'Guarda la direccin del estudiante.';

# 2022-03-22 09:07:33.157630
+-- ddl-end --

# 2022-03-22 09:07:33.204771
+COMMENT ON COLUMN public.estudiantes.pais IS E'Guarda el pas de nacimiento del estudiante. Hay 50 pases Europeos y uno de ellos debe ser Espaa en la base de datos.';

# 2022-03-22 09:07:33.220676
+-- ddl-end --

# 2022-03-22 09:07:33.267384
+COMMENT ON COLUMN public.estudiantes.telefono IS E'uarda el telfono de contacto del estudiante.';

# 2022-03-22 09:07:33.283226
+-- ddl-end --

# 2022-03-22 09:07:33.314143
+COMMENT ON COLUMN public.estudiantes.email IS E'Guarda el email del estudiante.';

# 2022-03-22 09:07:33.329657
+-- ddl-end --

# 2022-03-22 09:07:33.392785
+COMMENT ON COLUMN public.estudiantes.creditos_aprobados IS E'Guarda el nmero de crditos conseguidos/aprobados en su carrera. Para disfrutar de una beca deben ser mayores o iguales a 60 ECTS y menores o iguales de 220.';

# 2022-03-22 09:07:33.423480
+-- ddl-end --

# 2022-03-22 09:07:33.439157
+ALTER TABLE public.estudiantes OWNER TO postgres;

# 2022-03-22 09:07:40.267095
+-- ddl-end --

# 2022-03-22 09:07:40.298527
+-- object: public.universidades | type: TABLE --

# 2022-03-22 09:07:40.314111
+-- DROP TABLE IF EXISTS public.universidades CASCADE;

# 2022-03-22 09:07:40.329755
+CREATE TABLE public.universidades (

# 2022-03-22 09:07:40.361126
+codigo_erasmus integer NOT NULL,

# 2022-03-22 09:07:40.376812
+nombre text NOT NULL,

# 2022-03-22 09:07:40.407607
+direccion text NOT NULL,

# 2022-03-22 09:07:40.407607
+pais text NOT NULL,

# 2022-03-22 09:07:40.439091
+telefono bigint NOT NULL,

# 2022-03-22 09:07:40.454594
+email text NOT NULL,

# 2022-03-22 09:07:42.345090
+CONSTRAINT universidades_pk PRIMARY KEY (codigo_er

# 2022-03-22 09:07:57.798892
+-- Database generated with pgModeler (PostgreSQL Database Modeler).
+-- pgModeler version: 0.9.4
+-- PostgreSQL version: 13.0
+-- Project Site: pgmodeler.io
+-- Model Author: ---
+
+-- Database creation must be performed outside a multi lined SQL file. 
+-- These commands were put in this file only as a convenience.
+-- 
+-- object: new_database | type: DATABASE --
+-- DROP DATABASE IF EXISTS new_database;

# 2022-03-22 09:07:57.830135
+CREATE DATABASE new_database;

# 2022-03-22 09:07:57.877022
+-- ddl-end --
+
+
+-- object: public.estudiantes | type: TABLE --
+-- DROP TABLE IF EXISTS public.estudiantes CASCADE;

# 2022-03-22 09:07:58.032947
+CREATE TABLE public.estudiantes (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-03-22 09:07:58.142793
+-- ddl-end --
+COMMENT ON TABLE public.estudiantes IS E'Guarda los estudiantes que solicitan becas para realizar estancias en universidades distintas de donde estn matriculados.';

# 2022-03-22 09:07:58.205207
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.codigo_estudiante IS E'Guarda el cdigo del estudiante.';

# 2022-03-22 09:07:58.251886
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.nombre IS E'Guarda el nombre del estudiante';

# 2022-03-22 09:07:58.361102
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.apellidos IS E'Guarda los apellidos del estudiante.';

# 2022-03-22 09:07:58.423639
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.direccion IS E'Guarda la direccin del estudiante.';

# 2022-03-22 09:07:58.470307
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.pais IS E'Guarda el pas de nacimiento del estudiante. Hay 50 pases Europeos y uno de ellos debe ser Espaa en la base de datos.';

# 2022-03-22 09:07:58.533275
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.telefono IS E'uarda el telfono de contacto del estudiante.';

# 2022-03-22 09:07:58.564342
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.email IS E'Guarda el email del estudiante.';

# 2022-03-22 09:07:58.642179
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.creditos_aprobados IS E'Guarda el nmero de crditos conseguidos/aprobados en su carrera. Para disfrutar de una beca deben ser mayores o iguales a 60 ECTS y menores o iguales de 220.';

# 2022-03-22 09:07:58.673628
+-- ddl-end --
+ALTER TABLE public.estudiantes OWNER TO postgres;

# 2022-03-22 09:08:02.376178
+-- ddl-end --
+
+-- object: public.universidades | type: TABLE --
+-- DROP TABLE IF EXISTS public.universidades CASCADE;

# 2022-03-22 09:08:14.063425
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT N ;

# 2022-03-22 09:08:40.845085
+\d

# 2022-03-22 09:08:52.722085
+\c pl1;

# 2022-03-22 09:08:54.800713
+\d

# 2022-03-22 09:09:02.455231
+drop table estudiantes;

# 2022-03-22 09:09:30.689746
+CREATE TABLE public.estudiantes (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-03-22 09:09:40.674975
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL,
+                            CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)
+                            );

# 2022-03-22 09:09:50.674053
+CREATE TABLE public.asignaturas (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-03-22 09:09:58.877529
+CREATE TABLE public.estancias (
+    fecha_inicio date NOT NULL,
+        fecha_fin date NOT NULL,
+            tipo_beca text NOT NULL,
+                duracion char(1) NOT NULL,
+                    cuantia real NOT NULL,
+                        estudiante integer NOT NULL,
+                            universidad integer NOT NULL,
+                                CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)
+                                );

# 2022-03-22 09:10:08.112125
+CREATE TABLE public.convalidaciones (
+    nota_destino char(2) NOT NULL,
+        nota_origen real NOT NULL,
+            fecha date NOT NULL,
+                estudiante_estancias integer NOT NULL,
+                    universidad_estancias integer NOT NULL,
+                        asignatura_origen integer NOT NULL,
+                            asignatura_destino integer NOT NULL,
+                                CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)
+                                );

# 2022-03-22 09:11:15.299502
+copy estudiantes from 'C:\estudiantes.csv' using delimiters ',';

# 2022-03-22 09:13:36.450728
+copy universidades from 'C:\universidades.csv' using delimiters ',';

# 2022-03-22 09:14:12.857115
+copy asignaturas from 'C:\asignaturas.csv' using delimiters ',';

# 2022-03-22 09:14:51.216381
+copy estancias from 'C:\estancias.csv' using delimiters ',';

# 2022-03-22 09:16:21.826016
+copy convalidaciones from 'C:\convalidaiones.csv' using delimiters ',';

# 2022-03-22 09:17:26.393791
+copy convalidaciones from 'C:\convalidaciones.csv' using delimiters ',';

# 2022-03-22 09:20:48.112651
+\d

# 2022-03-22 09:29:00.237367
+ALTER TABLE public.estudiantes ADD CONSTRAINT universidades_fk FOREIGN KEY (codigo_erasmus_universidades)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-03-22 09:29:18.878197
+ALTER TABLE public.asignaturas ADD CONSTRAINT universidades_fk FOREIGN KEY (universidad)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-03-22 09:29:32.300229
+ALTER TABLE public.estancias ADD CONSTRAINT estudiantes_fk FOREIGN KEY (estudiante)
+REFERENCES public.estudiantes (codigo_estudiante) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-03-22 09:31:02.954345
+ALTER TABLE public.estancias ADD CONSTRAINT universidades_fk FOREIGN KEY (universidad)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-03-22 09:31:13.626476
+ALTER TABLE public.convalidaciones ADD CONSTRAINT estancias_fk FOREIGN KEY (estudiante_estancias,universidad_estancias)
+REFERENCES public.estancias (estudiante,universidad) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-03-22 09:31:23.470090
+ALTER TABLE public.convalidaciones ADD CONSTRAINT asignaturas_fk FOREIGN KEY (asignatura_origen)
+REFERENCES public.asignaturas (codigo_asignatura) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-03-22 09:31:38.079444
+ALTER TABLE public.convalidaciones ADD CONSTRAINT asignaturas_fk1 FOREIGN KEY (asignatura_destino)
+REFERENCES public.asignaturas (codigo_asignatura) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-03-22 09:37:05.691307
+\d

# 2022-03-22 09:37:20.113212
+ALTER TABLE asignaturas DISABLE TRIGGER ALL

# 2022-03-22 09:37:29.565865
+ALTER TABLE convalidaciones DISABLE TRIGGER ALL

# 2022-03-22 09:37:38.066280
+ALTER TABLE estancias DISABLE TRIGGER ALL

# 2022-03-22 09:37:45.362822
+ALTER TABLE estudiantes DISABLE TRIGGER ALL

# 2022-03-22 09:37:54.113915
+ALTER TABLE universidades DISABLE TRIGGER ALL

# 2022-03-23 12:45:25.857768
+\d

# 2022-03-23 13:29:12.277795
+select universidades.nombre from universidades natural join estudiantes natural join asignaturas natural join estancias natural join convalidaciones;

# 2022-03-23 13:31:07.690318
+select universidades.nombre from universidades inner join estudiantes ON estudiantes.codigo_erasmus_universidades = universidades.codigo_erasmus inner join asignaturas ON asignaturas.universidad = universidades.codigo_erasmus inner join convalidaciones ON convalidaciones.asignatura_origen = asignaturas.codigo_asignatura inner join estancias ON estancias.estudiante = convalidaciones.estudiante_estancias ;

# 2022-03-23 13:32:55.688888
+\c pl1;

# 2022-03-23 13:32:56.500995
+ls

# 2022-03-23 13:33:17.176637
+select universidades.nombre from universidades inner join estudiantes ON estudiantes.codigo_erasmus_universidades = universidades.codigo_erasmus inner join asignaturas ON asignaturas.universidad = universidades.codigo_erasmus inner join convalidaciones ON convalidaciones.asignatura_origen = asignaturas.codigo_asignatura inner join estancias ON estancias.estudiante = convalidaciones.estudiante_estancias where universidades.pais='spain';

# 2022-03-23 13:33:34.770963
+select * from universidades where pais='spain';

# 2022-03-23 13:33:40.599053
+select * from universidades where pais='Spain';

# 2022-03-23 13:33:46.505671
+select universidades.nombre from universidades inner join estudiantes ON estudiantes.codigo_erasmus_universidades = universidades.codigo_erasmus inner join asignaturas ON asignaturas.universidad = universidades.codigo_erasmus inner join convalidaciones ON convalidaciones.asignatura_origen = asignaturas.codigo_asignatura inner join estancias ON estancias.estudiante = convalidaciones.estudiante_estancias where universidades.pais='Spain';

# 2022-03-23 13:38:39.052785
+select universidades.nombre, avg(*) from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus where pais='Spain';

# 2022-03-23 13:40:26.755068
+select universidades.nombre from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus where pais='Spain' and (estancias.tipo_beca='KA103'or estancias.tipo_beca='KA107');

# 2022-03-23 13:44:18.906826
+select universidades.nombre from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante where pais='Spain' and (estancias.tipo_beca='KA103'or estancias.tipo_beca='KA107') and estudiantes.creditos_aprobados>120;

# 2022-03-23 13:44:37.694057
+select universidades.nombre from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante where universidades.pais='Spain' and (estancias.tipo_beca='KA103'or estancias.tipo_beca='KA107') and estudiantes.creditos_aprobados>120;

# 2022-03-23 13:53:08.872775
+select universidades.nombre from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante where universidades.pais='Spain' and (estancias.tipo_beca='KA103'or estancias.tipo_beca='KA107') and estudiantes.creditos_aprobados>120 and estancias.universidad distinct (select * from universidades where pais ='Spain');

# 2022-03-23 13:54:31.233627
+select universidades.nombre from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante where universidades.pais='Spain' and (estancias.tipo_beca='KA103'or estancias.tipo_beca='KA107') and estudiantes.creditos_aprobados>120 and estancias.universidad <> (select * from universidades where pais ='Spain');

# 2022-03-23 13:55:55.326940
+select universidades.nombre from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante where universidades.pais='Spain' and (estancias.tipo_beca='KA103'or estancias.tipo_beca='KA107') and estudiantes.creditos_aprobados>120 and estancias.universidad <> (select uni.codigo_erasmus from universidades as uni where pais ='Spain');

# 2022-03-23 13:59:41.874326
+select universidades.nombre from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante inner join asignaturas ON asignaturas.universidad = universidades.codigo_erasmus inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura where universidades.pais='Spain' and (estancias.tipo_beca='KA103'or estancias.tipo_beca='KA107') and estudiantes.creditos_aprobados>120 and estancias.universidad <> (select uni.codigo_erasmus from universidades as uni where pais ='Spain');

# 2022-03-23 13:59:53.827410
+select universidades.nombre from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante inner join asignaturas ON asignaturas.universidad = universidades.codigo_erasmus inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura where universidades.pais='Spain' and (estancias.tipo_beca='KA103'or estancias.tipo_beca='KA107') and estudiantes.creditos_aprobados>120;

# 2022-03-23 14:00:30.468702
+select distinct universidades.nombre from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante inner join asignaturas ON asignaturas.universidad = universidades.codigo_erasmus inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura where universidades.pais='Spain' and (estancias.tipo_beca='KA103'or estancias.tipo_beca='KA107') and estudiantes.creditos_aprobados>120;

# 2022-03-23 14:03:42.248584
+\o salida.txt

# 2022-03-23 14:03:43.655603
+select distinct universidades.nombre from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante inner join asignaturas ON asignaturas.universidad = universidades.codigo_erasmus inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura where universidades.pais='Spain' and (estancias.tipo_beca='KA103'or estancias.tipo_beca='KA107') and estudiantes.creditos_aprobados>120;

# 2022-03-23 14:03:55.780160
+\o

# 2022-03-23 14:11:04.795191
+
+select distinct universidades.nombre, (select count(*) from estudiantes e inner join estancias e2 on  e.codigo_estudiante = e2.estudiante  where (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') and e.creditos_aprobados>120; )
+from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus 
+inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante
+inner join asignaturas ON asignaturas.universidad = universidades.codigo_erasmus
+inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura
+
+where universidades.pais='Spain' ;

# 2022-03-23 14:11:26.529237
+
+select distinct universidades.nombre, (select count(*) from estudiantes e inner join estancias e2 on  e.codigo_estudiante = e2.estudiante  where (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') and e.creditos_aprobados>120)
+from universidades inner join estancias ON estancias.universidad = universidades.codigo_erasmus 
+inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante
+inner join asignaturas ON asignaturas.universidad = universidades.codigo_erasmus
+inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura
+
+where universidades.pais='Spain' ;

# 2022-03-23 14:13:24.342059
+
+select distinct universidades.nombre, (select count(*) from estudiantes e inner join estancias e2 on  e.codigo_estudiante = e2.estudiante  where uni.codigo_erasmus =e.codigo_erasmus_universidades and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') and e.creditos_aprobados>120)
+from universidades as uni inner join estancias ON estancias.universidad = universidades.codigo_erasmus 
+inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante
+inner join asignaturas ON asignaturas.universidad = universidades.codigo_erasmus
+inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura
+
+where universidades.pais='Spain' ;
+

# 2022-03-23 14:14:16.341706
+
+    select distinct universidades.nombre, (select count(*) from estudiantes e inner join estancias e2 on  e.codigo_estudiante = e2.estudiante  where uni.codigo_erasmus =e.codigo_erasmus_universidades and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') and e.creditos_aprobados>120)
+    from universidades as uni inner join estancias ON estancias.universidad = uni.codigo_erasmus 
+    inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante
+    inner join asignaturas ON asignaturas.universidad = uni.codigo_erasmus
+    inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura
+    
+    where universidades.pais='Spain' ;
+

# 2022-03-23 14:14:29.185392
+
+    select distinct universidades.nombre, (select count(*) from estudiantes e inner join estancias e2 on  e.codigo_estudiante = e2.estudiante  where uni.codigo_erasmus =e.codigo_erasmus_universidades and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') and e.creditos_aprobados>120)
+    from universidades as uni inner join estancias ON estancias.universidad = uni.codigo_erasmus 
+    inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante
+    inner join asignaturas ON asignaturas.universidad = uni.codigo_erasmus
+    inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura
+    
+    where universidades.pais='Spain' ;

# 2022-03-23 14:15:04.029291
+select distinct uni.nombre,
+        (select count(*) from estudiantes e inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+        where uni.codigo_erasmus =e.codigo_erasmus_universidades and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') and e.creditos_aprobados>120)
+    from universidades as uni inner join estancias ON estancias.universidad = uni.codigo_erasmus 
+    inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante
+    inner join asignaturas ON asignaturas.universidad = uni.codigo_erasmus
+    inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura
+    
+    where universidades.pais='Spain' ;

# 2022-03-23 14:15:29.263981
+select distinct uni.nombre,
+        (select count(*) from estudiantes e inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+        where uni.codigo_erasmus =e.codigo_erasmus_universidades and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') and e.creditos_aprobados>120)
+    from universidades as uni inner join estancias ON estancias.universidad = uni.codigo_erasmus 
+    inner join estudiantes ON estudiantes.codigo_estudiante = estancias.estudiante
+    inner join asignaturas ON asignaturas.universidad = uni.codigo_erasmus
+    inner join convalidaciones ON convalidaciones.asignatura_destino = asignaturas.codigo_asignatura
+    
+    where uni.pais='Spain' ;

# 2022-03-23 14:19:03.784502
+\c pl1;

# 2022-03-23 14:19:06.003433
+
+    select distinct uni.nombre,
+        (select count(*) 
+        from estudiantes e inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+        where uni.codigo_erasmus =e.codigo_erasmus_universidades
+                and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+                and e.creditos_aprobados>120)
+                and e2.universidad <>uni.codigo_erasmus 
+    from universidades
+    
+    where uni.pais='Spain' ;

# 2022-03-23 14:19:29.331579
+select distinct uni.nombre,
+        (select count(*) 
+        from estudiantes e inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+        where uni.codigo_erasmus=e.codigo_erasmus_universidades
+                and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+                and e.creditos_aprobados>120)
+                and e2.universidad <>uni.codigo_erasmus 
+    from universidades as uni
+    
+    where uni.pais='Spain' ;

# 2022-03-23 14:20:00.581120
+select distinct uni.nombre,(select count(*) from estudiantes e 
+        inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+        where uni.codigo_erasmus=e.codigo_erasmus_universidades
+                and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+                and e.creditos_aprobados>120)
+                and e2.universidad <>uni.codigo_erasmus 
+    from universidades as uni
+    
+    where uni.pais='Spain' ;
+

# 2022-03-23 14:20:47.971667
+select distinct uni.nombre,(select count(*) from estudiantes e 
+        inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+        where uni.codigo_erasmus=e.codigo_erasmus_universidades
+                and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+                and e.creditos_aprobados>120)
+                
+    from universidades as uni
+    where uni.pais='Spain' ;

# 2022-03-23 14:22:36.983488
+\c pl1;

# 2022-03-23 14:22:38.936537
+select distinct uni.nombre,(select count(*) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad)
+from universidades as uni
+where uni.pais='Spain' ;

# 2022-03-23 14:33:48.401152
+\c pl1;

# 2022-03-23 14:33:51.764826
+explain select distinct uni.nombre,(select count(*) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+        )
+from universidades as uni
+where uni.pais='Spain' ;
+

# 2022-03-23 14:34:07.303685
+\o salida.txt

# 2022-03-23 14:34:10.872176
+explain select distinct uni.nombre,(select count(*) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+        )
+from universidades as uni
+where uni.pais='Spain' ;
+

# 2022-03-23 14:34:14.647068
+\o

# 2022-03-23 14:34:16.157014
+exit

# 2022-03-24 11:13:35.956349
+\c pl1;

# 2022-03-24 11:13:37.158980
+\d

# 2022-03-24 11:13:41.266924
+\o salida.txt

# 2022-03-24 11:13:45.666500
+select uni.nombre,((select count( distinct e.codigo_estudiante) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+        )*100 / (select count(*) from estudiantes e3 where e3.codigo_erasmus_universidades = uni.codigo_erasmus ) )as porcentajeAlumnos
+from universidades as uni
+where uni.pais='Spain' ;
+

# 2022-03-24 11:14:16.087455
+\c pl1;

# 2022-03-24 11:14:18.181326
+\o salida.txt

# 2022-03-24 11:14:29.947509
+explain select uni.nombre,((select count( distinct e.codigo_estudiante) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+        )*100 / (select count(*) from estudiantes e3 where e3.codigo_erasmus_universidades = uni.codigo_erasmus ) )as porcentajeAlumnos
+from universidades as uni
+where uni.pais='Spain' ;
+

# 2022-03-24 11:14:32.213012
+\o

# 2022-03-24 11:14:33.041264
+exit

# 2022-03-24 18:56:15.265094
+\c pl1;

# 2022-03-24 18:56:16.702353
+\d

# 2022-03-24 18:56:44.999177
+create index indiceUniversidad1 on universidades (nombre);

# 2022-03-24 18:56:46.015226
+create index indiceUniversidad2 on universidades (pais);

# 2022-03-24 18:56:46.327400
+create index indiceUniversidad3 on universidades (codigo_erasmus_universidades);

# 2022-03-24 18:56:46.358570
+create index indiceUniversidad4 on universidades  using hash(nombre);

# 2022-03-24 18:56:46.561667
+create index indiceUniversidad5 on universidades  using hash(pais);

# 2022-03-24 18:56:46.749058
+create index indiceUniversidad6 on universidades  using hash(codigo_erasmus_universidades);

# 2022-03-24 18:56:46.795788
+create index indiceUniversidad7 on universidades  using btree(nombre);

# 2022-03-24 18:56:47.733193
+create index indiceUniversidad8 on universidades  using btree(pais);

# 2022-03-24 18:56:48.077549
+create index indiceUniversidad9 on universidades  using btree(codigo_erasmus_universidades);

# 2022-03-24 18:56:48.140259
+create index indiceUEstudiantes1 on estudiantes  (nombre);

# 2022-03-24 18:57:26.764825
+create index indiceUEstudiantes2 on estudiantes  (codigo_estudiante);

# 2022-03-24 18:59:23.421395
+create index indiceUEstudiantes3 on estudiantes  (pais);

# 2022-03-24 18:59:33.249281
+create index indiceUEstudiantes4 on estudiantes  (creditos_aprobados);

# 2022-03-24 18:59:38.046451
+create index indiceUEstudiantes5 on estudiantes  (codigo_erasmus_universidades);

# 2022-03-24 18:59:41.780992
+create index indiceUEstudiantes6 on estudiantes   using hash(nombre);

# 2022-03-24 18:59:56.327659
+create index indiceUEstudiantes7 on estudiantes   using hash(codigo_estudiante);

# 2022-03-24 19:00:11.889973
+create index indiceUEstudiantes8 on estudiantes   using hash(pais);

# 2022-03-24 19:07:27.109421
+create index indiceUEstudiantes9 on estudiantes   using hash(creditos_aprobados);

# 2022-03-24 19:09:12.843969
+create index indiceUEstudiantes10 on estudiantes   using hash(codigo_erasmus_universidades);

# 2022-03-24 19:09:24.390211
+create index indiceUEstudiantes11 on estudiantes   using btree(nombre);

# 2022-03-24 19:09:59.546197
+create index indiceUEstudiantes12 on estudiantes   using btree(codigo_estudiante);

# 2022-03-24 19:10:02.780334
+create index indiceUEstudiantes13 on estudiantes   using btree(pais);

# 2022-03-24 19:10:12.749266
+create index indiceUEstudiantes14 on estudiantes   using btree(creditos_aprobados);

# 2022-03-24 19:10:16.874315
+create index indiceUEstudiantes15 on estudiantes   using btree(codigo_erasmus_universidades);

# 2022-03-24 19:10:20.467584
+create index indiceUEstancia1 on estancias  (tipo_beca);

# 2022-03-24 19:10:26.749269
+create index indiceUEstancia2 on estancias  (duracion);

# 2022-03-24 19:10:31.342906
+create index indiceUEstancia3 on estancias  (estudiante);

# 2022-03-24 19:10:33.780560
+create index indiceUEstancia4 on estancias  (universidad);

# 2022-03-24 19:10:36.640075
+create index indiceUEstancia5 on estancias using hash (tipo_beca);

# 2022-03-24 19:46:26.336808
+create index indiceUEstancia6 on estancias using hash (duracion);

# 2022-03-24 19:52:04.285893
+\c pl1;

# 2022-03-24 19:52:34.720326
+create index indiceAsignaturas1 on asignaturas  (codigo_asignatura);

# 2022-03-24 19:52:35.948720
+create index indiceAsignaturas4 on asignaturas  (universidad);

# 2022-03-24 19:52:36.521960
+create index indiceAsignaturas5 on asignaturas using hash (codigo_asignatura);

# 2022-03-24 19:52:38.780474
+create index indiceAsignaturas8 on asignaturas using hash (universidad);

# 2022-03-24 19:52:40.520271
+create index indiceAsignaturas9 on asignaturas  using btree (codigo_asignatura);

# 2022-03-24 19:56:06.246103
+create index indiceAsignaturas12 on asignaturas  using btree (universidad);

# 2022-03-24 19:56:27.699547
+\d universidades

# 2022-03-24 19:56:47.417529
+create index indiceUniversidad3 on universidades (codigo_erasmus);

# 2022-03-24 19:56:47.605519
+create index indiceUniversidad6 on universidades  using hash(codigo_erasmus);

# 2022-03-24 19:56:49.026187
+create index indiceUniversidad9 on universidades  using btree(codigo_erasmus);

# 2022-03-24 19:57:11.542456
+create index indiceConvalidaciones1 on convalidaciones (nota_destino);

# 2022-03-24 19:57:50.058025
+create index indiceConvalidaciones2 on convalidaciones (nota_origen);

# 2022-03-24 19:58:13.401810
+create index indiceConvalidaciones3 on convalidaciones (estudiante_estancias);

# 2022-03-24 19:58:23.214062
+create index indiceConvalidaciones4 on convalidaciones (universidad_estancias);

# 2022-03-24 19:58:36.541951
+create index indiceConvalidaciones5 on convalidaciones (asignatura_origen);

# 2022-03-24 19:58:49.995626
+create index indiceConvalidaciones6 on convalidaciones (asignatura_destino);

# 2022-03-24 19:59:38.386446
+create index indiceConvalidaciones13 on convalidaciones using btree(nota_destino);

# 2022-03-24 20:00:10.620697
+create index indiceConvalidaciones14 on convalidaciones using btree(nota_origen);

# 2022-03-24 20:00:27.151579
+create index indiceConvalidaciones15 on convalidaciones using btree(estudiante_estancias);

# 2022-03-24 20:00:34.307456
+create index indiceConvalidaciones16 on convalidaciones using btree(universidad_estancias);

# 2022-03-24 20:00:46.417093
+create index indiceConvalidaciones17 on convalidaciones using btree(asignatura_origen);

# 2022-03-24 20:00:57.886215
+create index indiceConvalidaciones18 on convalidaciones using btree(asignatura_destino);

# 2022-03-24 20:01:10.948327
+create index indiceUEstudiantes2 on estudiantes  (codigo_estudiante);

# 2022-03-24 20:01:10.979753
+create index indiceUEstudiantes5 on estudiantes  (codigo_erasmus_universidades);

# 2022-03-24 20:01:11.027344
+create index indiceUEstudiantes7 on estudiantes   using hash(codigo_estudiante);

# 2022-03-24 20:01:11.057839
+create index indiceUEstudiantes10 on estudiantes   using hash(codigo_erasmus_universidades);

# 2022-03-24 20:01:11.105051
+create index indiceUEstudiantes12 on estudiantes   using btree(codigo_estudiante);

# 2022-03-24 20:01:41.104618
+create index indiceUEstudiantes15 on estudiantes   using btree(codigo_erasmus_universidades);

# 2022-03-24 20:01:57.792361
+\o salida.txt

# 2022-03-24 20:02:07.448331
+explain select uni.nombre,((select count( distinct e.codigo_estudiante) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+        )*100 / (select count(*) from estudiantes e3 where e3.codigo_erasmus_universidades = uni.codigo_erasmus ) )as porcentajeAlumnos
+from universidades as uni
+where uni.pais='Spain' ;
+

# 2022-03-24 20:02:09.401314
+\o

# 2022-03-24 20:02:10.573413
+exit

# 2022-03-24 20:27:42.716789
+\c pl1;

# 2022-03-24 20:29:32.363585
+select count(*) from universidades;

# 2022-03-24 20:30:26.858659
+\d universidades

# 2022-03-24 20:32:57.394087
+DELETE FROM universidades WHERE codigo_erasmus IN (SELECT codigo_erasmus FROM universidades ORDER BY random() LIMIT 40000);
+
+ 

# 2022-03-24 20:33:31.900459
+\d estudiantes

# 2022-03-24 20:35:07.657751
+ DELETE FROM estudiantes WHERE codigo_erasmus_universidades NOT IN (SELECT codigo_erasmus FROM universidades );
+
+ 

# 2022-03-24 20:36:32.516937
+\d asignaturas

# 2022-03-24 20:36:49.231355
+ DELETE FROM asignaturas WHERE universidad NOT IN (SELECT codigo_erasmus FROM universidades);

# 2022-03-24 20:37:08.352660
+\d estudiantes

# 2022-03-24 20:37:12.316182
+\d estancias

# 2022-03-24 20:37:27.191589
+ DELETE FROM estancias WHERE universidad NOT IN (SELECT codigo_erasmus FROM universidades);

# 2022-03-24 20:37:48.858784
+\d convalidaciones

# 2022-03-24 20:38:39.246958
+ DELETE FROM convalidaciones WHERE universidad_estancias NOT IN (SELECT codigo_erasmus FROM universidades);

# 2022-03-24 20:40:42.424530
+ DELETE FROM estudiantes WHERE codigo_erasmus_universidades NOT IN (SELECT codigo_erasmus FROM universidades);
+
+ DELETE FROM asignaturas WHERE universidad NOT IN (SELECT codigo_erasmus FROM universidades);
+
+ DELETE FROM estancias WHERE universidad NOT IN (SELECT codigo_erasmus FROM universidades);
+
+ DELETE FROM convalidaciones WHERE universidad_estancias NOT IN (SELECT codigo_erasmus FROM universidades);

# 2022-03-24 20:43:25.453380
+ DELETE FROM convalidaciones WHERE asignatura_origen NOT IN (SELECT codigo_asignatura FROM asignaturas);
+
+ DELETE FROM convalidaciones WHERE asignatura_destino NOT IN (SELECT codigo_asignatura FROM asignaturas);

# 2022-03-24 21:10:14.783988
+\c pl1;

# 2022-03-24 21:10:49.774545
+select uni.nombre,((select count( distinct e.codigo_estudiante) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+        )*100 / (select count(*) from estudiantes e3 where e3.codigo_erasmus_universidades = uni.codigo_erasmus ) )as porcentajeAlumnos
+from universidades as uni
+where uni.pais='Spain' ;
+

# 2022-03-24 21:11:12.730080
+\c pl1;

# 2022-03-24 21:11:20.619907
+\o salida.txt

# 2022-03-24 21:11:24.213685
+select uni.nombre,((select count( distinct e.codigo_estudiante) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+        )*100 / (select count(*) from estudiantes e3 where e3.codigo_erasmus_universidades = uni.codigo_erasmus ) )as porcentajeAlumnos
+from universidades as uni
+where uni.pais='Spain' ;
+

# 2022-03-24 21:11:38.047646
+explain select uni.nombre,((select count( distinct e.codigo_estudiante) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+        )*100 / (select count(*) from estudiantes e3 where e3.codigo_erasmus_universidades = uni.codigo_erasmus ) )as porcentajeAlumnos
+from universidades as uni
+where uni.pais='Spain' ;
+

# 2022-03-24 21:11:43.282375
+exit

# 2022-03-24 21:14:40.821917
+\c pl1;

# 2022-03-24 21:14:45.104248
+\o salida2.txt

# 2022-03-24 21:15:36.072942
+explain select uni.nombre,((select count( distinct e.codigo_estudiante) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+        )*100 / (select count(*) from estudiantes e3 where e3.codigo_erasmus_universidades = uni.codigo_erasmus ) )as porcentajeAlumnos
+from universidades as uni
+where uni.pais='Spain' ;
+

# 2022-03-24 21:15:39.494326
+exit

# 2022-03-25 08:35:58.732309
+\c pl1;

# 2022-03-25 08:36:10.407817
+vacuum

# 2022-03-25 08:36:12.532426
+:

# 2022-03-25 08:36:21.032793
+\d

# 2022-03-25 08:36:26.284978
+\d asignaturas

# 2022-03-25 08:36:40.206592
+reindex index indiceasignaturas1

# 2022-03-25 09:11:31.861975
+\c pl1;

# 2022-03-25 09:11:45.768508
+reindex index indiceasignaturas5;

# 2022-03-25 09:21:23.637931
+\c pl1;

# 2022-03-25 09:21:26.763062
+\d asignaturas

# 2022-03-25 10:47:15.863090
+\c pl1;

# 2022-03-25 10:47:18.209210
+\o salida2.txt

# 2022-03-25 10:47:41.927927
+explain select uni.nombre,((select count( distinct e.codigo_estudiante) from estudiantes e 
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+        and e.creditos_aprobados>120
+        and uni.codigo_erasmus<>e2.universidad
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+        )*100 / (select count(*) from estudiantes e3 where e3.codigo_erasmus_universidades = uni.codigo_erasmus ) )as porcentajeAlumnos
+from universidades as uni
+where uni.pais='Spain' ;

# 2022-03-25 10:48:36.646881
+\c pl1;

# 2022-03-25 10:49:09.888825
+create index indiceasignaturas22 on asignaturas using hash(sodigo_asignatura);

# 2022-03-25 16:45:13.384231
+exit

# 2022-03-25 16:46:31.242660
+\c pl1;

# 2022-03-25 16:46:32.976221
+\d 

# 2022-03-25 16:46:39.570310
+\d asignaturas

# 2022-03-25 21:02:16.753845
+vacuum;

# 2022-03-25 21:18:23.404
+reindex index indiceasignaturas5;

# 2022-03-25 21:20:11.003
+reindex index indiceconvalidaciones3;

# 2022-03-25 21:26:58.094
+reindex index indiceuestancia3;

# 2022-03-25 21:30:01.882 
+reindex index indiceuestudiantes10;

# 2022-03-25 21:35:43.222
+reindex index indiceuestudiantes15;

# 2022-03-25 21:38:13.375 
+reindex index indiceuniversidad8;

# 2022-03-29 08:41:15.846805
+\c pl1;

# 2022-03-29 08:41:17.394415
+\d

# 2022-03-29 08:42:20.907016
+explain select uni.nombre,((select count( distinct e.codigo_estudiante) from estudiantes e 
+
+    inner join estancias e2 on  e.codigo_estudiante = e2.estudiante 
+
+    inner join convalidaciones c on c.estudiante_estancias =e2.estudiante 
+
+    inner join asignaturas a on a.codigo_asignatura =c.asignatura_origen 
+
+    where uni.codigo_erasmus=e.codigo_erasmus_universidades
+
+        and (e2.tipo_beca='KA103'or e2.tipo_beca='KA107') 
+
+        and e.creditos_aprobados>120
+
+        and uni.codigo_erasmus<>e2.universidad
+
+        and (a.tipo='obligatoria' or a.tipo='bsica')
+
+        and (c.nota_destino='B+' or c.nota_destino='B' or c.nota_destino='B-') 
+
+        )*100 / (select count(*) from estudiantes e3 where e3.codigo_erasmus_universidades = uni.codigo_erasmus ) )as porcentajeAlumnos
+
+from universidades as uni
+
+where uni.pais='Spain' ;

# 2022-03-29 08:43:58.083668
+select * from pg_stats where tablename='estudiantes';

# 2022-03-29 08:44:05.629542
+select * from pg_stats where tablename='asignaturas';

# 2022-03-29 08:44:12.912080
+select * from pg_stats where tablename='convalidaciones';

# 2022-03-29 08:44:19.458642
+select * from pg_stats where tablename='universidades';

# 2022-03-29 08:44:23.333697
+exit

# 2022-04-19 08:24:03.506550
+version

# 2022-04-19 08:24:07.419311
+help

# 2022-04-19 08:24:19.652045
+exit

# 2022-04-19 08:28:46.650040
+\d

# 2022-04-19 08:29:58.711299
+drop table paco;

# 2022-04-19 08:30:32.925954
+drop table alumno;

# 2022-04-19 08:30:37.992213
+drop table alumno3;

# 2022-04-19 08:31:12.555813
+drop table alumno3_0;

# 2022-04-19 08:31:16.430380
+\d

# 2022-04-19 08:31:23.583871
+\c pl1;

# 2022-04-19 08:31:25.417730
+\d

# 2022-04-19 08:31:37.006021
+drop table asign;

# 2022-04-19 08:31:43.582261
+drop table asignaturas;

# 2022-04-19 08:31:54.425805
+drop cascade table asignaturas;

# 2022-04-19 08:32:13.472314
+drop table asignaturas cascade;

# 2022-04-19 08:32:17.278323
+\d

# 2022-04-19 08:32:28.748422
+drop table convalidaciones cascade;

# 2022-04-19 08:32:37.449409
+drop table estudiantes cascade;

# 2022-04-19 08:32:47.352639
+drop table estancias cascade;

# 2022-04-19 08:32:50.140349
+\d

# 2022-04-19 08:32:58.215265
+drop table universidades cascade;

# 2022-04-19 08:33:03.385503
+\d

# 2022-04-19 08:36:58.678801
+CREATE TABLE public.estudiantes (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-04-19 08:37:11.810003
+COMMENT ON TABLE public.estudiantes IS E'Guarda los estudiantes que solicitan becas para realizar estancias en universidades distintas de donde estn matriculados.';

# 2022-04-19 08:37:11.879024
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.codigo_estudiante IS E'Guarda el cdigo del estudiante.';

# 2022-04-19 08:37:11.946550
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.nombre IS E'Guarda el nombre del estudiante';

# 2022-04-19 08:37:11.987623
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.apellidos IS E'Guarda los apellidos del estudiante.';

# 2022-04-19 08:37:12.042018
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.direccion IS E'Guarda la direccin del estudiante.';

# 2022-04-19 08:37:12.123627
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.pais IS E'Guarda el pas de nacimiento del estudiante. Hay 50 pases Europeos y uno de ellos debe ser Espaa en la base de datos.';

# 2022-04-19 08:37:12.192202
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.telefono IS E'uarda el telfono de contacto del estudiante.';

# 2022-04-19 08:37:12.259913
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.email IS E'Guarda el email del estudiante.';

# 2022-04-19 08:37:12.341661
+-- ddl-end --
+COMMENT ON COLUMN public.estudiantes.creditos_aprobados IS E'Guarda el nmero de crditos conseguidos/aprobados en su carrera. Para disfrutar de una beca deben ser mayores o iguales a 60 ECTS y menores o iguales de 220.';

# 2022-04-19 08:37:24.008634
+-- ddl-end --
+
+
+
+
+FROMads
+;

# 2022-04-19 08:37:40.918634
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL,
+                            CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)
+                            );

# 2022-04-19 08:37:50.884317
+CREATE TABLE public.asignaturas (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-04-19 08:38:00.755091
+CREATE TABLE public.estancias (
+    fecha_inicio date NOT NULL,
+        fecha_fin date NOT NULL,
+            tipo_beca text NOT NULL,
+                duracion char(1) NOT NULL,
+                    cuantia real NOT NULL,
+                        estudiante integer NOT NULL,
+                            universidad integer NOT NULL,
+                                CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)
+                                );

# 2022-04-19 08:38:09.521617
+CREATE TABLE public.convalidaciones (
+    nota_destino char(2) NOT NULL,
+        nota_origen real NOT NULL,
+            fecha date NOT NULL,
+                estudiante_estancias integer NOT NULL,
+                    universidad_estancias integer NOT NULL,
+                        asignatura_origen integer NOT NULL,
+                            asignatura_destino integer NOT NULL,
+                                CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)
+                                );

# 2022-04-19 08:38:54.537279
+ALTER TABLE public.estudiantes ADD CONSTRAINT universidades_fk FOREIGN KEY (codigo_erasmus_universidades)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-04-19 08:39:06.100258
+ALTER TABLE public.asignaturas ADD CONSTRAINT universidades_fk FOREIGN KEY (universidad)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-04-19 08:39:07.717180
+ALTER TABLE public.estancias ADD CONSTRAINT estudiantes_fk FOREIGN KEY (estudiante)
+REFERENCES public.estudiantes (codigo_estudiante) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-04-19 08:40:07.468217
+ALTER TABLE public.estancias ADD CONSTRAINT universidades_fk FOREIGN KEY (universidad)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-04-19 08:40:14.585892
+ALTER TABLE public.convalidaciones ADD CONSTRAINT estancias_fk FOREIGN KEY (estudiante_estancias,universidad_estancias)
+REFERENCES public.estancias (estudiante,universidad) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-04-19 08:40:20.761437
+ALTER TABLE public.convalidaciones ADD CONSTRAINT asignaturas_fk FOREIGN KEY (asignatura_origen)
+REFERENCES public.asignaturas (codigo_asignatura) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-04-19 08:40:27.378658
+ALTER TABLE public.convalidaciones ADD CONSTRAINT asignaturas_fk1 FOREIGN KEY (asignatura_destino)
+REFERENCES public.asignaturas (codigo_asignatura) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-04-19 08:40:30.748207
+EXIT
+
+;

# 2022-04-25 18:03:28.232048
+\c pl1;

# 2022-04-25 18:03:31.890112
+\d

# 2022-04-25 18:04:18.130576
+exit

# 2022-04-25 18:04:25.917485
+\d

# 2022-04-25 18:04:30.333395
+\c pl1;

# 2022-04-25 18:04:32.156925
+\d

# 2022-04-25 18:04:42.982836
+select * from estudiantes;

# 2022-04-25 18:06:39.256823
+insert into estudiantes values('2','pac','perez','calle','spain','123456789','pepe@gmail.com',3,1);

# 2022-04-25 18:07:12.487183
+insert into estudiantes values('2','pac','perez','calle','spain','123456789','pepe@gmail.com',3,'1');

# 2022-04-25 18:07:43.433228
+begin

# 2022-04-25 18:07:45.079567
+insert into estudiantes values('2','pac','perez','calle','spain','123456789','pepe@gmail.com',3,'1');

# 2022-04-25 18:07:48.067666
+commit

# 2022-04-25 18:08:00.788205
+select * from universidades;

# 2022-04-25 18:08:40.085753
+insert into universidades values('1','alcala','calles','spain','123456789','alcalal@uah.es');

# 2022-04-25 18:08:46.345691
+begin

# 2022-04-25 18:08:58.894597
+insert into universidades values('1','alcala','calles','spain','123456789','alcalal@uah.es');

# 2022-04-25 18:09:09.246310
+commit

# 2022-04-25 18:09:12.335472
+begin

# 2022-04-25 18:09:19.318541
+insert into estudiantes values('2','pac','perez','calle','spain','123456789','pepe@gmail.com',3,'1');

# 2022-04-25 18:09:22.512124
+commit

# 2022-04-25 18:40:30.656386
+select txid_current() from series;

# 2022-04-25 18:40:52.391651
+select txid_current() from estudiantes;

# 2022-04-25 18:50:48.563578
+exit

# 2022-04-26 08:58:11.915034
+\c pl1;

# 2022-04-26 09:00:27.418729
+create user usuario1 with password '1234'

# 2022-04-26 09:00:31.270397
+create user usuario2 with password '1234'

# 2022-04-26 09:00:34.943149
+create user usuario3 with password '1234'

# 2022-04-26 09:03:13.019472
+grant select,insert,update,delete on all tables in schema public to usuario1;

# 2022-04-26 09:03:15.789786
+grant select,insert,update,delete on all tables in schema public to usuario2;

# 2022-04-26 09:03:17.984551
+grant select,insert,update,delete on all tables in schema public to usuario3;

# 2022-04-26 09:04:50.654724
+exit

# 2022-04-26 09:05:19.308867
+\c pl1;

# 2022-04-26 09:05:20.465118
+\d

# 2022-04-26 09:05:25.482715
+select * from universidades;

# 2022-04-26 09:05:34.431658
+select * from asignaturas;

# 2022-04-26 09:05:37.254122
+be

# 2022-04-26 09:05:40.227693
+begin

# 2022-04-26 09:06:20.889809
+insert into asignaturas values('1','mates',6,'a',1);

# 2022-04-26 09:06:31.546269
+select * from asignaturas;

# 2022-04-26 09:12:13.419675
+\c pl1;

# 2022-04-26 09:12:34.022279
+select pg_locks;

# 2022-04-26 09:12:42.376488
+select pg_locks from pgstat;

# 2022-04-26 09:15:11.210655
+select * from pg_locks;

# 2022-04-26 09:25:32.096910
+commit;

# 2022-04-26 09:28:32.986447
+exit

# 2022-04-26 09:32:35.884782
+create user usuario3 with password asdf;

# 2022-04-26 09:32:41.916051
+create user usuario3 with password 'asdf';

# 2022-04-26 09:32:47.291036
+create user usuario4 with password 'asdf';

# 2022-04-26 09:32:50.573902
+grant select,insert,update,delete on all tables in schema public to usuario4;

# 2022-04-26 09:32:52.306684
+exit

# 2022-04-26 09:43:30.922496
+\d

# 2022-04-26 09:44:24.277993
+\c pl1;

# 2022-04-26 09:44:24.869970
+ls

# 2022-04-29 08:50:27.232089
+exit

# 2022-04-29 08:51:18.451649
+begin

# 2022-04-29 08:51:37.825714
+commit

# 2022-04-29 08:51:43.326706
+select * from pg_locks;

# 2022-04-29 08:52:02.055876
+\d

# 2022-04-29 08:52:06.238564
+select * from estudiantes;

# 2022-04-29 08:52:30.724249
+select * from universidades;

# 2022-04-29 08:52:40.271327
+select * from asignaturas;

# 2022-04-29 08:53:42.083525
+insert into universidades values('2','fran','calle','francia',123456123,'fran@fran.es');

# 2022-04-29 08:53:46.507011
+be

# 2022-04-29 08:53:49.709026
+begin

# 2022-04-29 08:55:04.083145
+insert into estudiantes values('3','paco','Lopez','calles','francia','123456123','paco@gmail.com',5,'2');

# 2022-04-29 08:55:32.912574
+insert into asignaturas values('2','fisica',5,'b',2);

# 2022-04-29 08:55:53.536653
+select * from asignaturas;

# 2022-04-29 08:55:57.396060
+select * from estudiantes;

# 2022-04-29 08:58:42.240999
+\d

# 2022-04-29 08:58:51.412534
+select * from estudiantes;

# 2022-04-29 08:59:04.411423
+select * from asignaturas;

# 2022-04-29 09:05:40.802219
+commit;

# 2022-04-29 09:05:53.020707
+select * from asignaturas;

# 2022-04-29 09:05:57.162113
+select * from estudiantes;

# 2022-04-29 09:06:26.334480
+select * from asignaturas;

# 2022-04-29 09:09:13.880374
+begin

# 2022-04-29 09:09:57.427719
+insert into universidades values('3','polo','calle','polonia',123456124,'polo@polo.es');

# 2022-04-29 09:10:31.472859
+insert into estudiantes values('3','paco','Lopez','calles','polonia','123456123','paco@gmail.com',5,'3');

# 2022-04-29 09:10:37.598793
+rollback

# 2022-04-29 09:10:43.495314
+begin

# 2022-04-29 09:10:55.526170
+insert into universidades values('4','polo','calle','polonia',123456124,'polo@polo.es');

# 2022-04-29 09:11:11.292112
+insert into estudiantes values('4','paco','Lopez','calles','polonia','123456123','paco@gmail.com',5,'4');

# 2022-04-29 09:11:34.557823
+insert into asignaturas values('4','fisicaAvanzada',6,'b',4);

# 2022-04-29 09:13:04.017479
+delete from universidades where codigo_erasmus='4';

# 2022-04-29 09:13:19.237154
+commit;

# 2022-04-29 09:13:23.517501
+select * from estudiantes;

# 2022-04-29 09:21:32.954315
+create table tabla_a(A integer primary key);

# 2022-04-29 09:21:40.846141
+create table tabla_b(B integer primary key);

# 2022-04-29 09:21:50.250284
+create table tabla_c(C integer primary key);

# 2022-04-29 09:22:39.344947
+insert into tabla_a values(10);

# 2022-04-29 09:22:43.814351
+insert into tabla_b values(20);

# 2022-04-29 09:22:48.970250
+insert into tabla_c values(30);

# 2022-04-29 09:29:17.454875
+select * from tabla_c;

# 2022-04-29 09:29:31.657321
+update tabla_c set 30/100 where C=30

# 2022-04-29 09:33:40.829359
+update tabla_c set (30/100) where C=30

# 2022-04-29 09:33:51.189731
+update tabla_c set (30 + 100) where C=30

# 2022-04-29 09:34:01.485502
+update tabla_c set (30 + 100) where C='30'

# 2022-04-29 09:34:55.298328
+begin

# 2022-04-29 09:35:02.956040
+update tabla_c set 0.3 where C='30'

# 2022-04-29 09:35:13.126414
+update tabla_c set '0.3' where C='30'

# 2022-04-29 09:35:21.330530
+update tabla_c set 0,3 where C='30'

# 2022-04-29 09:35:27.595463
+update tabla_c set '0,3' where C='30'

# 2022-04-29 09:35:57.063552
+update tabla_c set C=0.3 where C='30'

# 2022-04-29 09:36:18.953977
+rollback

# 2022-04-29 09:36:22.014951
+begin

# 2022-04-29 09:36:24.498876
+update tabla_c set C=0.3 where C='30'

# 2022-04-29 09:36:28.358531
+rollback

# 2022-04-29 09:36:30.671026
+begin

# 2022-04-29 09:36:41.061476
+rollback

# 2022-04-29 09:37:55.061707
+begin

# 2022-04-29 09:37:59.295650
+update tabla_c set C=0.3

# 2022-04-29 09:38:03.858902
+select * from tabla_c;

# 2022-04-29 09:38:11.688063
+rollback

# 2022-04-29 11:09:19.240559
+begin

# 2022-04-29 11:09:25.068471
+select * from tabla_c;

# 2022-04-29 11:10:14.069651
+update tabla_c set C=0.3

# 2022-04-29 11:10:27.333556
+select * from tabla_b;

# 2022-04-29 11:10:39.740041
+be

# 2022-04-29 11:10:42.239825
+begin

# 2022-04-29 11:10:43.864961
+select * from tabla_b;

# 2022-04-29 11:10:49.991242
+rol

# 2022-04-29 11:10:53.036672
+rollback

# 2022-04-29 11:11:23.458825
+select * from tabla_c;

# 2022-04-29 11:11:26.333740
+select * from tabla_c;

# 2022-04-29 11:11:30.398352
+exit

# 2022-04-29 11:11:34.975916
+select * from tabla_c;

# 2022-04-29 11:11:40.630517
+rollback

# 2022-04-29 11:11:42.364909
+select * from tabla_c;

# 2022-04-29 11:11:57.694318
+\d

# 2022-04-29 11:12:23.412261
+\c pl1;

# 2022-04-29 11:12:25.130446
+\d

# 2022-04-29 11:12:36.318007
+grant select,insert,update,delete on all tables in schema public to usuario2;

# 2022-04-29 11:12:38.834559
+grant select,insert,update,delete on all tables in schema public to usuario3;

# 2022-04-29 11:12:43.210289
+select * from tabla_c;

# 2022-04-29 11:12:45.006430
+select * from tabla_c;

# 2022-04-29 11:12:47.725993
+exit

# 2022-04-29 11:13:03.460122
+begin

# 2022-04-29 11:13:06.210614
+select * from tabla_c;

# 2022-04-29 11:13:12.178151
+update tabla_c set C=0.3;

# 2022-04-29 11:13:30.887039
+begin;

# 2022-04-29 11:13:34.075337
+select * from tabla_b;

# 2022-04-29 11:14:00.168486
+select * from tabla_a;

# 2022-04-29 11:14:35.573339
+update tabla_b set B=220

# 2022-04-29 11:14:53.339129
+select * from tabla_b;

# 2022-04-29 11:15:24.042315
+update tabla_a set A=220

# 2022-04-29 11:15:41.838978
+select * from tabla_a;

# 2022-04-29 11:16:07.870271
+update tabla_a set A=120;

# 2022-04-29 11:16:17.339156
+select * from tabla_c;

# 2022-04-29 11:16:55.339477
+select * from tabla_c;

# 2022-04-29 11:17:31.213923
+select * from tabla_a;

# 2022-04-29 11:18:33.740728
+update tabla_b set B=6600

# 2022-04-29 11:19:41.930218
+update tabla_c set C=250

# 2022-04-29 11:20:29.180067
+update tabla_c set C=-120;

# 2022-04-29 11:21:10.414338
+rollback

# 2022-04-29 11:21:13.024616
+rollback

# 2022-04-29 11:21:22.695898
+comc

# 2022-04-29 11:21:27.898785
+rol

# 2022-04-29 11:21:31.711470
+rollback

# 2022-04-29 11:21:36.962998
+begin

# 2022-04-29 11:21:42.211167
+begin

# 2022-04-29 11:21:46.492410
+begi

# 2022-04-29 11:21:50.813873
+begin

# 2022-04-29 11:22:00.903443
+select * from tabla_c;

# 2022-04-29 11:22:15.669483
+update tabla_c set C=0;

# 2022-04-29 11:22:26.747442
+select * from tabla_b;

# 2022-04-29 11:22:31.981654
+rol

# 2022-04-29 11:22:34.451839
+rollback

# 2022-04-29 11:22:38.018437
+rol

# 2022-04-29 11:22:45.092903
+rollback

# 2022-04-29 11:22:48.702529
+rollback

# 2022-04-29 11:22:52.109778
+select * from tabla_b;

# 2022-04-29 11:23:00.342507
+update tabla_b set B=20

# 2022-04-29 11:23:11.124132
+select * from tabla_c;

# 2022-04-29 11:23:13.998668
+select * from tabla_a;

# 2022-04-29 11:23:24.399067
+update tabla_a set A=10

# 2022-04-29 11:23:30.931148
+begin

# 2022-04-29 11:23:35.197023
+begin

# 2022-04-29 11:23:38.134471
+begin

# 2022-04-29 11:23:41.538000
+select * from tabla_c;

# 2022-04-29 11:23:44.039146
+update tabla_c set C=0;

# 2022-04-29 11:23:50.367715
+select * from tabla_b;

# 2022-04-29 11:24:02.820851
+select * from tabla_a;

# 2022-04-29 11:24:19.054812
+update tabla_b set B=220

# 2022-04-29 11:24:31.493981
+select * from tabla_b;

# 2022-04-29 11:24:48.586665
+update tabla_a set A=220

# 2022-04-29 11:25:00.056514
+select * from tabla_a;

# 2022-04-29 11:25:38.961618
+update tabla_a set A=-90;

# 2022-04-29 11:25:53.634462
+select * from tabla_c;

# 2022-04-29 11:26:04.727309
+select * from tabla_b;

# 2022-04-29 11:26:12.977242
+select * from tabla_c;

# 2022-04-29 11:26:25.554841
+select * from tabla_a;

# 2022-04-29 11:26:52.074870
+update tabla_b set B=6600;

# 2022-04-29 11:27:34.857612
+rollback

# 2022-04-29 11:27:39.028068
+rollback

# 2022-04-29 11:27:44.030899
+rollback

# 2022-04-29 11:27:51.062049
+select * from tabla_a;

# 2022-04-29 11:27:52.711835
+select * from tabla_b;

# 2022-04-29 11:27:54.383787
+select * from tabla_c;

# 2022-04-29 11:27:57.758387
+beg

# 2022-04-29 11:28:01.726246
+begin

# 2022-04-29 11:28:04.444897
+select * from tabla_c;

# 2022-04-29 11:28:15.460521
+update tabla_a set A=-90;

# 2022-04-29 11:28:20.351756
+roo

# 2022-04-29 11:28:22.133492
+rollback

# 2022-04-29 11:28:24.981618
+be

# 2022-04-29 11:28:27.751607
+begin

# 2022-04-29 11:28:30.032927
+select * from tabla_c;

# 2022-04-29 11:28:38.657956
+update tabla_c set C=0;

# 2022-04-29 11:28:47.361268
+begin

# 2022-04-29 11:28:51.501496
+select * from tabla_b;

# 2022-04-29 11:29:01.774142
+begin

# 2022-04-29 11:29:03.597098
+select * from tabla_a;

# 2022-04-29 11:29:21.143940
+update tabla_b set B=220

# 2022-04-29 11:29:29.425577
+select * from tabla_b;

# 2022-04-29 11:29:46.768896
+update tabla_a set A=220;

# 2022-04-29 11:29:59.831597
+select * from tabla_a;

# 2022-04-29 11:30:14.363146
+update tabla_a set A=-90;

# 2022-04-29 11:30:25.567441
+select * from tabla_c;

# 2022-04-29 11:30:35.581489
+select * from tabla_c;

# 2022-04-29 11:30:52.394186
+update tabla_b set B=6600;

# 2022-04-29 11:31:37.081831
+update tabla_c set C=250

# 2022-04-29 11:32:47.739296
+rollback

# 2022-04-29 11:32:50.253618
+rollback

# 2022-04-29 11:32:53.661396
+rollback

# 2022-05-03 07:56:26.801639
+select * from tabla_a;

# 2022-04-29 11:42:08.382229
+select * from tabla_b;

# 2022-04-29 11:42:10.273730
+select * from tabla_c;

# 2022-04-29 11:42:12.476506
+begin

# 2022-05-03 07:56:52.801063
+update tabla_c set C=0.3;

# 2022-05-03 07:57:13.331445
+select * from tabla_b;

# 2022-05-03 07:57:22.362396
+begin

# 2022-05-03 07:57:24.128410
+select * from tabla_b;

# 2022-05-03 07:57:27.798545
+be

# 2022-05-03 07:57:30.997400
+begin

# 2022-05-03 07:57:33.122421
+select * from tabla_a;

# 2022-05-03 07:58:11.091555
+update tabla_b set B=220

# 2022-05-03 07:58:25.372878
+select * from tabla_b;

# 2022-05-03 07:58:49.153806
+update tabla_a set A=220;

# 2022-05-03 07:59:01.155057
+select * from tabla_a;

# 2022-05-03 07:59:16.450798
+update tabla_a set a=-90;

# 2022-05-03 07:59:43.982314
+select * from tabla_c;

# 2022-05-03 08:00:07.263373
+select * from tabla_c;

# 2022-05-03 08:00:44.497449
+update tabla_b set B=6600;

# 2022-05-03 08:01:24.637483
+update tabla_c set C=250

# 2022-05-03 08:11:06.419365
+commit

# 2022-05-03 08:11:18.404193
+select * from tabla_c;

# 2022-05-03 08:11:19.951173
+select * from tabla_a;

# 2022-05-03 08:11:58.951129
+update tabla_c set C=-90;

# 2022-05-03 08:12:09.590193
+select * from tabla_c;

# 2022-05-03 08:13:00.044776
+commit;

# 2022-05-03 08:22:07.763236
+rollback

# 2022-05-03 08:23:04.998331
+select * from tabla_a;

# 2022-05-03 08:23:08.747361
+select * from tabla_b;

# 2022-05-03 08:23:10.653809
+select * from tabla_c;

# 2022-05-03 08:29:48.419313
+exit

# 2022-05-03 08:29:53.607946
+exit

# 2022-05-03 08:29:55.467911
+exit

# 2022-05-03 08:40:39.882815
+select * from pg_stat_activity where state='active';

# 2022-05-03 08:40:58.976729
+\o s

# 2022-05-03 08:41:08.335946
+\o s.txt

# 2022-05-03 08:41:22.179698
+\o c:\s.txt

# 2022-05-03 08:41:26.726517
+select * from pg_stat_activity where state='active';

# 2022-05-03 08:41:35.790556
+\o salida2.txt

# 2022-05-03 08:41:40.728026
+exit

# 2022-05-03 08:42:06.293164
+\o salida2.txt

# 2022-05-03 08:42:09.192380
+select * from pg_stat_activity where state='active';

# 2022-05-03 08:42:11.129936
+\o

# 2022-05-03 08:42:46.708848
+exit

# 2022-05-03 09:06:04.082285
+\c pl1;

# 2022-05-03 09:06:12.206960
+create table tabla_d(D integer primary key);

# 2022-05-03 09:06:19.145083
+insert into tabla_d values(40);

# 2022-05-03 09:06:28.426184
+update tabla_d set D=-90;

# 2022-05-03 09:06:48.039041
+exit

# 2022-05-03 09:07:50.577447
+\c pl1;

# 2022-05-03 09:07:54.210550
+update tabla_d set D=-100;

# 2022-05-03 09:07:57.101211
+exit

# 2022-05-03 09:11:10.756217
+\c pl1;

# 2022-05-03 09:11:17.914067
+create table tabla_e(E integer primary key);

# 2022-05-03 09:11:23.006192
+insert into tabla_e values(50);

# 2022-05-03 09:11:24.053376
+exit

# 2022-05-03 09:17:01.199871
+\c pl1;

# 2022-05-03 09:17:05.102334
+update tabla_d set D=-120;

# 2022-05-03 09:17:06.982092
+exit

# 2022-05-03 09:17:27.273822
+\c pl1;

# 2022-05-03 09:17:32.930522
+update tabla_d set D=1;

# 2022-05-03 09:17:39.117432
+update tabla_e set E=2;

# 2022-05-03 09:17:41.556412
+exit

# 2022-05-03 09:31:53.725083
+\c pl1;

# 2022-05-03 09:31:57.245391
+\d

# 2022-05-03 09:32:13.201231
+select * from tabla_e;

# 2022-05-03 09:32:15.452259
+select * from tabla_d;

# 2022-05-03 09:35:55.003208
+select  tableoid from estudiantes;

# 2022-05-03 09:36:17.048553
+select txid_current() from estudiantes;

# 2022-05-03 09:41:40.862794
+exuit

# 2022-05-03 09:41:43.211524
+exit

# 2022-05-03 09:42:03.223266
+\c pl1;

# 2022-05-03 09:42:14.515912
+select * from tabla_d;

# 2022-05-03 09:42:18.609965
+select * from tabla_e;

# 2022-05-03 09:42:51.875158
+exit

# 2022-05-10 07:51:35.890091
+\d

# 2022-05-10 07:51:38.097199
+\c pl1;

# 2022-05-10 07:51:39.702967
+\d

# 2022-05-10 07:51:43.763152
+select * from tabla_e;

# 2022-05-10 07:51:48.418279
+update tabla_e set E=24;

# 2022-05-10 07:51:51.274567
+select * from tabla_e;

# 2022-05-10 07:51:57.834662
+exit

# 2022-05-10 07:57:08.106739
+\c pl1;

# 2022-05-10 07:57:08.780842
+ls

# 2022-05-10 07:57:10.143966
+\d

# 2022-05-10 07:57:24.171283
+create extension postgres_fdw;

# 2022-05-10 07:59:12.386313
+exit

# 2022-05-10 09:21:18.544880
+\d

# 2022-05-10 09:21:49.762757
+\d 

# 2022-05-10 09:24:56.190775
+\l

# 2022-05-10 09:29:59.237315
+\d

# 2022-05-10 09:30:02.939903
+\c pl1;

# 2022-05-10 09:30:04.190213
+\d

# 2022-05-10 09:30:08.220376
+\c pl1;

# 2022-05-10 09:30:10.190870
+\d

# 2022-05-10 09:30:20.971141
+create table tabla_x(X integer primary key);

# 2022-05-10 09:30:22.331755
+\d

# 2022-05-10 09:31:21.056416
+exit

# 2022-05-10 09:32:00.275430
+exit

# 2022-05-10 09:37:04.253386
+\c pl1;

# 2022-05-10 09:37:05.350835
+\d

# 2022-05-10 09:37:15.763889
+drop table universidades cascade;

# 2022-05-10 09:37:25.698578
+drop table tabla_a cascade;

# 2022-05-10 09:37:30.389331
+drop table tabla_b cascade;

# 2022-05-10 09:37:34.657327
+drop table tabla_c cascade;

# 2022-05-10 09:37:40.247528
+drop table tabla_d cascade;

# 2022-05-10 09:37:45.309911
+drop table tabla_x cascade;

# 2022-05-10 09:37:49.899937
+\d

# 2022-05-10 09:37:54.671961
+drop table tabla_e cascade;

# 2022-05-10 09:38:03.703466
+drop table asignaturas cascade;

# 2022-05-10 09:38:13.782550
+drop table estancias cascade;

# 2022-05-10 09:38:22.923832
+drop table estudiantes cascade;

# 2022-05-10 09:38:25.524268
+\d

# 2022-05-10 09:38:37.901113
+drop table convalidaciones cascade;

# 2022-05-10 09:38:40.496399
+\d

# 2022-05-10 09:38:45.430457
+exit

# 2022-05-10 09:39:54.021300
+\c pl1;

# 2022-05-10 09:39:55.620075
+\d

# 2022-05-10 09:40:01.415244
+drop table *;

# 2022-05-10 09:40:08.974755
+drop all tables;

# 2022-05-10 09:40:46.725486
+drop table asignaturas cascade;

# 2022-05-10 09:41:00.446772
+drop table estancias cascade;

# 2022-05-10 09:41:15.158694
+drop table universidades cascade;

# 2022-05-10 09:41:27.490858
+drop table tabla_a,tabla_b cascade;

# 2022-05-10 09:41:39.254802
+drop table tabla_c,tabla_d,tabla_e cascade;

# 2022-05-10 09:41:42.025244
+\d

# 2022-05-10 09:41:54.201413
+drop table convalidaciones,estudiantes cascade;

# 2022-05-10 09:41:56.665993
+exit

# 2022-05-10 09:42:04.901873
+\d

# 2022-05-10 09:42:07.493852
+\c pl1;

# 2022-05-10 09:42:09.035341
+\d

# 2022-05-10 09:42:33.852289
+drop table convalidaciones,estudiantes,universidades,estancias,asignaturas,tabla_a,tabla_b,tabla_c,tabla_d,tabla_e cascade;

# 2022-05-10 09:42:36.191533
+ \d

# 2022-05-10 09:42:38.430866
+exit

# 2022-05-10 09:42:47.864362
+\c pl1;

# 2022-05-10 09:42:49.364196
+\d

# 2022-05-10 09:42:54.304227
+drop table convalidaciones,estudiantes,universidades,estancias,asignaturas,tabla_a,tabla_b,tabla_c,tabla_d,tabla_e cascade;

# 2022-05-10 09:42:56.991149
+\d

# 2022-05-10 09:42:59.132358
+exit

# 2022-05-10 09:44:50.446824
+CREATE TABLE public.estudiantes (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-05-10 09:44:50.619691
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL,
+                            CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)
+                            );

# 2022-05-10 09:44:50.869487
+CREATE TABLE public.asignaturas (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-05-10 09:44:51.024934
+CREATE TABLE public.estancias (
+    fecha_inicio date NOT NULL,
+        fecha_fin date NOT NULL,
+            tipo_beca text NOT NULL,
+                duracion char(1) NOT NULL,
+                    cuantia real NOT NULL,
+                        estudiante integer NOT NULL,
+                            universidad integer NOT NULL,
+                                CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)
+                                );

# 2022-05-10 09:44:52.665363
+CREATE TABLE public.convalidaciones (
+    nota_destino char(2) NOT NULL,
+        nota_origen real NOT NULL,
+            fecha date NOT NULL,
+                estudiante_estancias integer NOT NULL,
+                    universidad_estancias integer NOT NULL,
+                        asignatura_origen integer NOT NULL,
+                            asignatura_destino integer NOT NULL,
+                                CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)
+                                );

# 2022-05-10 09:44:55.292083
+\d

# 2022-05-10 09:44:58.370707
+exit

# 2022-05-10 09:45:05.228032
+\c pl1;

# 2022-05-10 09:45:06.384359
+CREATE TABLE public.estudiantes (

# 2022-05-10 09:45:06.415991
+codigo_estudiante integer NOT NULL,

# 2022-05-10 09:45:06.447293
+nombre text NOT NULL,

# 2022-05-10 09:45:06.462788
+apellidos text NOT NULL,

# 2022-05-10 09:45:06.494233
+direccion text NOT NULL,

# 2022-05-10 09:45:06.525540
+pais text NOT NULL,

# 2022-05-10 09:45:06.541214
+telefono bigint NOT NULL,

# 2022-05-10 09:45:06.572335
+email text NOT NULL,

# 2022-05-10 09:45:06.587936
+creditos_aprobados integer NOT NULL,

# 2022-05-10 09:45:06.618864
+codigo_erasmus_universidades integer,

# 2022-05-10 09:45:06.634866
+CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)

# 2022-05-10 09:45:06.650227
+);

# 2022-05-10 09:45:06.681945
+CREATE TABLE public.universidades (

# 2022-05-10 09:45:06.696853
+codigo_erasmus integer NOT NULL,

# 2022-05-10 09:45:06.728598
+nombre text NOT NULL,

# 2022-05-10 09:45:06.759708
+direccion text NOT NULL,

# 2022-05-10 09:45:06.759708
+pais text NOT NULL,

# 2022-05-10 09:45:06.791095
+telefono bigint NOT NULL,

# 2022-05-10 09:45:06.822272
+email text NOT NULL,

# 2022-05-10 09:45:06.853400
+CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)

# 2022-05-10 09:45:06.869043
+);

# 2022-05-10 09:45:06.884665
+CREATE TABLE public.asignaturas (

# 2022-05-10 09:45:06.915771
+codigo_asignatura integer NOT NULL,

# 2022-05-10 09:45:06.947528
+nombre text NOT NULL,

# 2022-05-10 09:45:06.962675
+creditos integer NOT NULL,

# 2022-05-10 09:45:06.994118
+tipo text NOT NULL,

# 2022-05-10 09:45:07.025489
+universidad integer,

# 2022-05-10 09:45:07.088421
+CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)

# 2022-05-10 09:45:07.102932
+);

# 2022-05-10 09:45:07.118785
+CREATE TABLE public.estancias (

# 2022-05-10 09:45:07.150724
+fecha_inicio date NOT NULL,

# 2022-05-10 09:45:07.165743
+fecha_fin date NOT NULL,

# 2022-05-10 09:45:07.181740
+tipo_beca text NOT NULL,

# 2022-05-10 09:45:07.196657
+duracion char(1) NOT NULL,

# 2022-05-10 09:45:07.229141
+cuantia real NOT NULL,

# 2022-05-10 09:45:07.244493
+estudiante integer NOT NULL,

# 2022-05-10 09:45:07.259600
+universidad integer NOT NULL,

# 2022-05-10 09:45:07.291052
+CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)

# 2022-05-10 09:45:07.306086
+);

# 2022-05-10 09:45:07.338071
+CREATE TABLE public.convalidaciones (

# 2022-05-10 09:45:07.369145
+nota_destino char(2) NOT NULL,

# 2022-05-10 09:45:07.384581
+nota_origen real NOT NULL,

# 2022-05-10 09:45:07.400677
+fecha date NOT NULL,

# 2022-05-10 09:45:07.431853
+estudiante_estancias integer NOT NULL,

# 2022-05-10 09:45:07.462822
+universidad_estancias integer NOT NULL,

# 2022-05-10 09:45:07.494365
+asignatura_origen integer NOT NULL,

# 2022-05-10 09:45:07.510004
+asignatura_destino integer NOT NULL,

# 2022-05-10 09:45:07.557023
+CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)

# 2022-05-10 09:45:18.079688
+CREATE TABLE public.estudiantes (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-05-10 09:45:18.252450
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL,
+                            CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)
+                            );

# 2022-05-10 09:45:18.465933
+CREATE TABLE public.asignaturas (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-05-10 09:45:18.669086
+CREATE TABLE public.estancias (
+    fecha_inicio date NOT NULL,
+        fecha_fin date NOT NULL,
+            tipo_beca text NOT NULL,
+                duracion char(1) NOT NULL,
+                    cuantia real NOT NULL,
+                        estudiante integer NOT NULL,
+                            universidad integer NOT NULL,
+                                CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)
+                                );

# 2022-05-10 09:45:20.684064
+CREATE TABLE public.convalidaciones (
+    nota_destino char(2) NOT NULL,
+        nota_origen real NOT NULL,
+            fecha date NOT NULL,
+                estudiante_estancias integer NOT NULL,
+                    universidad_estancias integer NOT NULL,
+                        asignatura_origen integer NOT NULL,
+                            asignatura_destino integer NOT NULL,
+                                CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)
+                                );

# 2022-05-10 09:45:22.652707
+exit

# 2022-05-10 09:45:29.028116
+\c pl1;

# 2022-05-10 09:45:31.919171
+CREATE TABLE public.estudiantes (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-05-10 09:45:32.090908
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL,
+                            CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)
+                            );

# 2022-05-10 09:45:32.340718
+CREATE TABLE public.asignaturas (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-05-10 09:45:32.512817
+CREATE TABLE public.estancias (
+    fecha_inicio date NOT NULL,
+        fecha_fin date NOT NULL,
+            tipo_beca text NOT NULL,
+                duracion char(1) NOT NULL,
+                    cuantia real NOT NULL,
+                        estudiante integer NOT NULL,
+                            universidad integer NOT NULL,
+                                CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)
+                                );

# 2022-05-10 09:45:33.433685
+CREATE TABLE public.convalidaciones (
+    nota_destino char(2) NOT NULL,
+        nota_origen real NOT NULL,
+            fecha date NOT NULL,
+                estudiante_estancias integer NOT NULL,
+                    universidad_estancias integer NOT NULL,
+                        asignatura_origen integer NOT NULL,
+                            asignatura_destino integer NOT NULL,
+                                CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)
+                                );

# 2022-05-10 09:45:36.091590
+exit

# 2022-05-10 09:45:45.308591
+\c pl1;

# 2022-05-10 09:46:11.555104
+exit

# 2022-05-10 09:46:19.586979
+\c pl1;

# 2022-05-10 09:46:21.649971
+drop table convalidaciones,estudiantes,universidades,estancias,asignaturas,tabla_a,tabla_b,tabla_c,tabla_d,tabla_e cascade;

# 2022-05-10 09:46:24.868425
+\d

# 2022-05-10 09:46:33.135604
+drop table convalidaciones,estudiantes,universidades,estancias,asignaturas cascade;

# 2022-05-10 09:46:35.542644
+\d 

# 2022-05-10 09:46:37.073120
+exit

# 2022-05-10 09:46:56.637521
+\c pl1;

# 2022-05-10 09:46:58.588744
+\d 

# 2022-05-10 09:47:07.355196
+exit

# 2022-05-10 09:47:11.714717
+\d

# 2022-05-10 09:47:14.354684
+drop table convalidaciones,estudiantes,universidades,estancias,asignaturas cascade;

# 2022-05-10 09:47:17.088805
+\c pl1;

# 2022-05-10 09:47:25.167951
+CREATE TABLE public.estudiantes (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-05-10 09:47:25.355412
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL,
+                            CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)
+                            );

# 2022-05-10 09:47:25.605350
+CREATE TABLE public.asignaturas (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-05-10 09:47:25.745816
+CREATE TABLE public.estancias (
+    fecha_inicio date NOT NULL,
+        fecha_fin date NOT NULL,
+            tipo_beca text NOT NULL,
+                duracion char(1) NOT NULL,
+                    cuantia real NOT NULL,
+                        estudiante integer NOT NULL,
+                            universidad integer NOT NULL,
+                                CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)
+                                );

# 2022-05-10 09:47:26.713828
+CREATE TABLE public.convalidaciones (
+    nota_destino char(2) NOT NULL,
+        nota_origen real NOT NULL,
+            fecha date NOT NULL,
+                estudiante_estancias integer NOT NULL,
+                    universidad_estancias integer NOT NULL,
+                        asignatura_origen integer NOT NULL,
+                            asignatura_destino integer NOT NULL,
+                                CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)
+                                );

# 2022-05-10 09:47:34.168096
+ALTER TABLE public.estudiantes ADD CONSTRAINT universidades_fk FOREIGN KEY (codigo_erasmus_universidades)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:47:41.105766
+ALTER TABLE public.asignaturas ADD CONSTRAINT universidades_fk FOREIGN KEY (universidad)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:47:41.980568
+ALTER TABLE public.estancias ADD CONSTRAINT estudiantes_fk FOREIGN KEY (estudiante)
+REFERENCES public.estudiantes (codigo_estudiante) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:48:06.000807
+ALTER TABLE public.estancias ADD CONSTRAINT universidades_fk FOREIGN KEY (universidad)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:48:13.969595
+ALTER TABLE public.convalidaciones ADD CONSTRAINT estancias_fk FOREIGN KEY (estudiante_estancias,universidad_estancias)
+REFERENCES public.estancias (estudiante,universidad) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:48:20.125644
+ALTER TABLE public.convalidaciones ADD CONSTRAINT asignaturas_fk FOREIGN KEY (asignatura_origen)
+REFERENCES public.asignaturas (codigo_asignatura) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:48:30.953728
+ALTER TABLE public.convalidaciones ADD CONSTRAINT asignaturas_fk1 FOREIGN KEY (asignatura_destino)
+REFERENCES public.asignaturas (codigo_asignatura) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:48:33.453936
+exit

# 2022-05-10 09:48:39.250660
+\c pl1;

# 2022-05-10 09:48:40.423737
+\d

# 2022-05-10 09:48:48.079094
+ALTER TABLE public.estudiantes ADD CONSTRAINT universidades_fk FOREIGN KEY (codigo_erasmus_universidades)

# 2022-05-10 09:48:49.766577
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL

# 2022-05-10 09:48:57.021172
+ALTER TABLE public.estudiantes ADD CONSTRAINT universidades_fk FOREIGN KEY (codigo_erasmus_universidades)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:49:04.547655
+ALTER TABLE public.asignaturas ADD CONSTRAINT universidades_fk FOREIGN KEY (universidad)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:49:10.891774
+ALTER TABLE public.estancias ADD CONSTRAINT estudiantes_fk FOREIGN KEY (estudiante)
+REFERENCES public.estudiantes (codigo_estudiante) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:49:22.684072
+ALTER TABLE public.estancias ADD CONSTRAINT universidades_fk FOREIGN KEY (universidad)
+REFERENCES public.universidades (codigo_erasmus) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:49:28.622151
+ALTER TABLE public.convalidaciones ADD CONSTRAINT estancias_fk FOREIGN KEY (estudiante_estancias,universidad_estancias)
+REFERENCES public.estancias (estudiante,universidad) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:49:34.341314
+ALTER TABLE public.convalidaciones ADD CONSTRAINT asignaturas_fk FOREIGN KEY (asignatura_origen)
+REFERENCES public.asignaturas (codigo_asignatura) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:49:41.169551
+ALTER TABLE public.convalidaciones ADD CONSTRAINT asignaturas_fk1 FOREIGN KEY (asignatura_destino)
+REFERENCES public.asignaturas (codigo_asignatura) MATCH FULL
+ON DELETE RESTRICT ON UPDATE RESTRICT;

# 2022-05-10 09:49:44.139185
+exit

# 2022-05-10 09:50:19.669180
+select * from uni

# 2022-05-10 09:50:31.634663
+\c pl1;

# 2022-05-10 09:50:35.339356
+select * from universidades;

# 2022-05-10 09:50:40.058214
+insert into universidades values('4','polo','calle','polonia',123456124,'polo@polo.es');

# 2022-05-10 09:50:42.964157
+select * from universidades;

# 2022-05-10 09:51:40.567675
+create extension postgres_fdw;

# 2022-05-10 09:51:42.770942
+exit

# 2022-05-10 09:51:49.677266
+\c pl1;

# 2022-05-10 09:51:51.067939
+create extension postgres_fdw;

# 2022-05-10 09:56:03.581778
+create server becas1 foreign data wrapper postgres_fdw option (dbname 'becas1',host '10.0.2.15',port '5433')

# 2022-05-10 09:56:11.956491
+create server becas1 foreign data wrapper postgres_fdw options (dbname 'becas1',host '10.0.2.15',port '5433')

# 2022-05-10 15:44:56.171571
+exit

# 2022-05-10 15:45:11.218580
+\c pl1;

# 2022-05-10 15:45:32.578786
+create server becas2 foreign data wrapper postgres_fdw options (dbname 'becas2',port '5432')

# 2022-05-10 15:45:42.328828
+exit

# 2022-05-10 15:45:47.921583
+\c pl1;

# 2022-05-10 15:45:54.828587
+drop server becas1;

# 2022-05-10 15:46:08.140322
+create server becas1 foreign data wrapper postgres_fdw options (dbname 'becas1',port '5433')

# 2022-05-10 15:47:50.230280
+create user mapping for postgres server becas1 options(user 'postgres' , password '1234')

# 2022-05-10 15:47:53.397672
+exit

# 2022-05-10 15:48:02.287849
+\c pl1;

# 2022-05-10 15:48:08.710063
+create user mapping for postgres server becas2 options(user 'postgres' , password '1234')

# 2022-05-10 15:51:57.803895
+create foreign table.conten1(
+codigo_erasmus integerL,
+    nombre text ,
+        direccion text ,
+            pais text,
+                telefono bigint ,
+                    email text ) server becas1;

# 2022-05-10 15:52:28.757218
+create foreign table.universidades(
+codigo_erasmus integerL,
+    nombre text ,
+        direccion text ,
+            pais text,
+                telefono bigint ,
+                    email text ) server becas1;

# 2022-05-10 15:52:45.850676
+create foreign table public.conten1(
+codigo_erasmus integerL,
+    nombre text ,
+        direccion text ,
+            pais text,
+                telefono bigint ,
+                    email text ) server becas1;

# 2022-05-10 15:52:52.006921
+create foreign table public.conten1(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text ,
+            pais text,
+                telefono bigint ,
+                    email text ) server becas1;

# 2022-05-10 15:53:03.226141
+create foreign table public.conten1(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text ,
+            pais text,
+                telefono bigint ,
+                    email text ) server becas2;

# 2022-05-10 15:53:22.334979
+exit

# 2022-05-10 15:53:31.476815
+\c pl1;

# 2022-05-10 15:53:54.350309
+create foreign table public.conten2(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text ,
+            pais text,
+                telefono bigint ,
+                    email text ) server becas1;

# 2022-05-10 15:55:05.865933
+select * from conten2;

# 2022-05-10 15:55:09.694101
+select * from conten1;

# 2022-05-10 15:55:14.022449
+select * from conten2;

# 2022-05-10 15:55:46.756613
+create user mapping for postgres server becas2 options(user 'postgres' , password '1234S-gu');

# 2022-05-10 15:55:53.975262
+create user mapping for postgres server becas1 options(user 'postgres' , password '1234S-gu');

# 2022-05-10 15:57:17.420592
+alter user postgres with  password 'postgres';

# 2022-05-10 15:57:33.170566
+\d

# 2022-05-10 15:58:08.474623
+\c pl1;

# 2022-05-10 15:58:11.646201
+alter user postgres with  password 'postgres';

# 2022-05-10 15:58:20.693134
+select * from conten2;

# 2022-05-10 15:58:27.162207
+select * from conten1;

# 2022-05-10 15:58:28.771255
+select * from conten2;

# 2022-05-10 15:58:36.271202
+\d

# 2022-05-10 15:59:16.506566
+exit

# 2022-05-10 15:59:33.849332
+\c pl1;

# 2022-05-10 15:59:37.099349
+exit

# 2022-05-10 15:59:42.912097
+\c pl1;

# 2022-05-10 15:59:45.225121
+select * from conten2;

# 2022-05-10 15:59:50.537139
+select * from conten1;

# 2022-05-10 16:01:36.694336
+EXIT

# 2022-05-10 16:01:42.897238
+EXIT

# 2022-05-10 16:09:53.131219
+\c pl1;

# 2022-05-10 16:10:08.132434
+\d

# 2022-05-10 16:10:10.741047
+select * from conten1;

# 2022-05-10 16:10:14.559055
+select * from conten2;

# 2022-05-10 16:10:25.861869
+\d

# 2022-05-10 16:10:29.876328
+select * from conten2;

# 2022-05-10 16:12:13.033458
+select * from universidades;

# 2022-05-10 16:12:18.173210
+select * from universidades;

# 2022-05-10 16:13:32.813716
+\dx 

# 2022-05-10 16:13:52.672840
+\dx postgres_fdw

# 2022-05-10 16:14:20.438471
+grant usage on FOREIGN DATA WRAPPER postgres_fdw to app_user;

# 2022-05-10 16:14:31.610711
+grant usage on FOREIGN DATA WRAPPER postgres_fdw to universidades;

# 2022-05-10 16:15:38.876011
+grant usage on FOREIGN DATA WRAPPER postgres_fdw to becas1;

# 2022-05-10 16:15:41.486079
+grant usage on FOREIGN DATA WRAPPER postgres_fdw to becas2;

# 2022-05-10 16:17:17.422847
+select * form becas1;

# 2022-05-10 16:17:20.235686
+select * form beca1;

# 2022-05-10 16:17:24.235382
+select * from beca1;

# 2022-05-10 16:17:27.344704
+select * from becas1;

# 2022-05-10 16:17:29.641676
+select * from becas2;

# 2022-05-10 16:17:32.844983
+select * from beca2;

# 2022-05-10 16:17:38.158384
+\d

# 2022-05-10 16:17:41.360410
+\dx postgres_fdw

# 2022-05-10 16:19:11.360505
+grant usage on FOREIGN DATA WRAPPER postgres_fdw to postgres;

# 2022-05-10 16:20:10.132318
+grant usage on FOREIGN DATA WRAPPER postgres_fdw to postgres;

# 2022-05-10 16:21:31.351160
+select * from conten1;

# 2022-05-10 16:21:41.820212
+drop table conten1;

# 2022-05-10 16:21:49.757365
+drop table conten1 cascade;

# 2022-05-10 16:21:56.399402
+\d

# 2022-05-10 16:22:01.241838
+drop server becas1;

# 2022-05-10 16:22:08.664294
+drop server becas1 cascade;

# 2022-05-10 16:22:13.679505
+\d 

# 2022-05-10 16:22:23.107954
+drop server becas1 cascade;

# 2022-05-10 16:22:31.529879
+drop server becas2 cascade;

# 2022-05-10 16:22:35.592428
+\d

# 2022-05-10 16:23:02.013208
+drop table asignaturas,convalidaciones,estancias,estudiantes,universidades cascade;

# 2022-05-10 16:23:11.262065
+drop table convalidaciones,estudiantes,universidades,estancias,asignaturas cascade;

# 2022-05-10 16:23:14.448277
+\d

# 2022-05-10 16:23:16.731317
+\d

# 2022-05-10 16:24:12.935244
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL
+                        );

# 2022-05-10 16:24:17.701224
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL
+                        );

# 2022-05-10 16:24:20.060606
+\d

# 2022-05-10 16:24:23.685610
+insert into universidades values('4','polo','calle','polonia',123456124,'polo@polo.es');

# 2022-05-10 16:24:32.948954
+insert into universidades values('1','alcala','calles','spain','123456789','alcalal@uah.es');

# 2022-05-10 16:24:38.448681
+select * from universidades;

# 2022-05-10 16:26:38.603949
+create server becas1 foreign data wrapper postgres_fdw options (dbname 'becas1',host '10.0.2.15' ,port '5432');

# 2022-05-10 16:27:49.041388
+create server becas2 foreign data wrapper postgres_fdw options (dbname 'becas2',host '10.0.2.15',port '5433');

# 2022-05-10 16:28:34.573017
+create user mapping for postgres server becas2 options(user 'postgres' , password 'postgres');

# 2022-05-10 16:28:45.635244
+create user mapping for postgres server becas1 options(user 'postgres' , password 'postgres');

# 2022-05-10 16:31:00.088542
+create foreign table public.contenido2(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text,
+            pais text,
+                telefono bigint,
+                    email text ) server becas2;

# 2022-05-10 16:31:08.166462
+create foreign table public.contenido2(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text,
+            pais text,
+                telefono bigint,
+                    email text ) server becas1;

# 2022-05-10 16:31:13.493676
+\d

# 2022-05-10 16:31:27.499405
+select * from contenido2;

# 2022-05-10 16:32:37.202615
+create foreign table public.contenido1(
+ codigo_erasmus integer,
+     nombre text ,
+         direccion text,
+             pais text,
+                 telefono bigint,
+                     email text ) server becas1;

# 2022-05-10 16:32:41.749264
+create foreign table public.contenido1(
+ codigo_erasmus integer,
+     nombre text ,
+         direccion text,
+             pais text,
+                 telefono bigint,
+                     email text ) server becas2;

# 2022-05-10 16:32:47.332257
+\d 

# 2022-05-10 16:32:57.398233
+select * from contenido1;

# 2022-05-10 16:33:17.945223
+\d

# 2022-05-10 16:33:33.898003
+create foreign table public.contenido2(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text,
+            pais text,
+                telefono bigint,
+                    email text ) server becas2;

# 2022-05-10 16:33:39.163708
+create foreign table public.contenidos2(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text,
+            pais text,
+                telefono bigint,
+                    email text ) server becas2;

# 2022-05-10 16:35:45.415887
+create foreign table public.universidades(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text,
+            pais text,
+                telefono bigint,
+                    email text ) server becas2;

# 2022-05-10 16:35:52.024532
+create foreign table public.universidades2(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text,
+            pais text,
+                telefono bigint,
+                    email text ) server becas2;

# 2022-05-10 16:35:55.149161
+create foreign table public.universidades2(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text,
+            pais text,
+                telefono bigint,
+                    email text ) server becas1;

# 2022-05-10 16:36:24.396242
+CREATE TABLE public.universidades2 (
+    codigo_erasmus integer,
+        nombre text ,
+            direccion text,
+                pais text,
+                    telefono bigint,
+                        email text 
+                        );

# 2022-05-10 16:36:44.688316
+select * from universidades2;

# 2022-05-10 16:37:22.188700
+create database becas1;

# 2022-05-10 16:37:27.391475
+\c becas1;

# 2022-05-10 16:37:30.453219
+CREATE TABLE public.universidades2 (
+    codigo_erasmus integer,
+        nombre text ,
+            direccion text,
+                pais text,
+                    telefono bigint,
+                        email text 
+                        );

# 2022-05-10 16:37:51.000871
+\d

# 2022-05-10 16:38:18.844828
+create server becas1 foreign data wrapper postgres_fdw options (dbname 'becas1',host '10.0.2.15',port '5433');

# 2022-05-10 16:38:27.830488
+create extension postgres_fdw;

# 2022-05-10 16:38:29.501018
+create server becas1 foreign data wrapper postgres_fdw options (dbname 'becas1',host '10.0.2.15',port '5433');

# 2022-05-10 16:38:58.720522
+create user mapping for postgres server becas1 options(user 'postgres' , password 'postgres');

# 2022-05-10 16:39:15.658615
+\d

# 2022-05-10 16:39:26.486299
+\d

# 2022-05-10 16:39:35.454159
+select * from universidades2
+;

# 2022-05-10 16:40:00.766119
+drop server becas2 cascade;

# 2022-05-10 16:40:06.172223
+drop server becas1 cascade;

# 2022-05-10 16:40:09.517711
+\d

# 2022-05-10 16:40:31.469799
+create server becas2 foreign data wrapper postgres_fdw options (dbname 'becas2',host '10.0.2.15' ,port '5432');

# 2022-05-10 16:40:55.468065
+create foreign table public.universidades2(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text,
+            pais text,
+                telefono bigint,
+                    email text ) server becas1;

# 2022-05-10 16:41:03.251969
+create foreign table public.universidades2(
+codigo_erasmus integer,
+    nombre text ,
+        direccion text,
+            pais text,
+                telefono bigint,
+                    email text ) server becas2;

# 2022-05-10 16:41:05.141744
+select * from universidades2;

# 2022-05-10 16:41:16.312870
+|d
+;

# 2022-05-10 16:41:17.703747
+\d

# 2022-05-10 16:41:38.799335
+select * from universidades2;

# 2022-05-10 16:41:48.235324
+create user mapping for postgres server becas1 options(user 'postgres' , password 'postgres');

# 2022-05-10 16:41:53.172260
+create user mapping for postgres server becas3 options(user 'postgres' , password 'postgres');

# 2022-05-10 16:41:58.453874
+create user mapping for postgres server becas2 options(user 'postgres' , password 'postgres');

# 2022-05-10 16:42:00.656739
+select * from universidades2;

# 2022-05-10 16:42:30.313309
+drop server becas2 cascade;

# 2022-05-10 16:42:40.922652
+drop table universidades cascade;

# 2022-05-10 16:42:42.922326
+\d

# 2022-05-10 16:42:49.217950
+\d

# 2022-05-10 16:43:00.099382
+drop table universidades2;

# 2022-05-10 16:43:02.802322
+\d

# 2022-05-10 16:43:30.037058
+create extension postgres_fdw;

# 2022-05-10 16:43:35.130320
+create extension postgres_fdw;

# 2022-05-10 16:44:39.863638
+CREATE SERVER server_name FOREIGN DATA WRAPPER postgres_fdw OPTIONS (host 'host_ip', 
+    dbname 'becas1', port '5433')a;

# 2022-05-10 16:45:22.381835
+CREATE SERVER serverBecas1 FOREIGN DATA WRAPPER postgres_fdw OPTIONS (host '10.0.2.15', dbname 'becas1', port '5433');

# 2022-05-10 16:45:43.739734
+create user mapping for postgres server serverBecas1 options(user 'postgres' , password 'postgres');

# 2022-05-10 16:46:08.818072
+create schema esquema;

# 2022-05-10 16:46:57.850250
+drop  server serverBecas1;

# 2022-05-10 16:47:01.616169
+drop  server serverBecas1 cascade;

# 2022-05-10 16:47:04.257067
+\d

# 2022-05-10 16:50:40.303169
+create server becas1 foreign data wrapper postgres_fdw options (dbname 'becas1',host '10.0.2.15',port '5433');

# 2022-05-10 16:50:47.754904
+drop server becas1 cascade;

# 2022-05-10 16:50:50.223536
+create server becas1 foreign data wrapper postgres_fdw options (dbname 'becas1',host '10.0.2.15',port '5433');

# 2022-05-10 16:51:05.645507
+create user mapping for postgres server becas1 options(user 'postgres' , password 'postgres');

# 2022-05-10 16:51:39.981233
+\d

# 2022-05-10 16:51:51.443143
+create table tabla_a(A integer);

# 2022-05-10 16:52:31.318292
+create foreign table public.tabla_a(A integer) server becas1;

# 2022-05-10 16:53:13.364250
+create user mapping for postgres server becas1 options(user 'postgres' , password 'postgres');

# 2022-05-10 16:53:28.521168
+create server becas1 foreign data wrapper postgres_fdw options (dbname 'becas1',host '10.0.2.15' ,port '5432');

# 2022-05-10 16:53:30.192662
+create user mapping for postgres server becas1 options(user 'postgres' , password 'postgres');

# 2022-05-10 16:53:34.598667
+create foreign table public.tabla_a(A integer) server becas1;

# 2022-05-10 16:53:38.270363
+\d

# 2022-05-10 16:53:51.770787
+select * from tabla_a;

# 2022-05-10 16:54:09.067528
+select * from tabla_a;

# 2022-05-10 16:57:58.920315
+\c becas1;

# 2022-05-10 16:58:02.517709
+\d

# 2022-05-10 16:58:16.632870
+\c pl1;

# 2022-05-10 16:58:19.467610
+\d

# 2022-05-10 16:58:29.528729
+drop server becas1 cascade;

# 2022-05-10 16:58:33.105991
+\d

# 2022-05-10 16:59:40.745560
+\c pl1;

# 2022-05-10 16:59:42.276708
+\d 

# 2022-05-10 16:59:48.135965
+drop table universidades2;

# 2022-05-10 16:59:50.932617
+drop table universidades;

# 2022-05-10 16:59:54.245978
+drop server becas1 cascade;

# 2022-05-10 16:59:57.949024
+drop server becas2 cascade;

# 2022-05-10 17:00:02.112504
+\d

# 2022-05-10 17:00:34.826036
+create server becas1 foreign data wrapper postgres_fdw options (dbname 'pl1',host '10.0.2.15' ,port '5433');

# 2022-05-10 17:00:54.013461
+create user mapping for postgres server becas1 options(user 'postgres' , password 'postgres');

# 2022-05-10 17:01:07.763445
+\d

# 2022-05-10 17:01:11.341925
+create table tabla_a(A integer);

# 2022-05-10 17:01:13.170080
+\d

# 2022-05-10 17:01:24.500281
+create foreign table public.tabla_a(A integer) server becas1;

# 2022-05-10 17:01:35.910288
+drop table tabla_a;

# 2022-05-10 17:01:38.270027
+create foreign table public.tabla_a(A integer) server becas1;

# 2022-05-10 17:01:40.254945
+\d

# 2022-05-10 17:01:49.941951
+select * from tabla_a;

# 2022-05-10 17:01:54.425994
+select * from tabla_a;

# 2022-05-10 17:03:08.698572
+create server becas2 foreign data wrapper postgres_fdw options (dbname 'pl1',host '10.0.2.15' ,port '5432');

# 2022-05-10 17:03:20.041753
+create user mapping for postgres server becas2 options(user 'postgres' , password 'postgres');

# 2022-05-10 17:03:27.338584
+\d 

# 2022-05-10 17:03:34.932476
+create foreign table public.tabla_a(A integer) server becas2;

# 2022-05-10 17:03:41.636044
+create foreign table public.tabla_b(B integer) server becas2;

# 2022-05-10 17:03:44.135976
+\d 

# 2022-05-10 17:03:48.869961
+select * from tabla_a;

# 2022-05-10 17:03:50.823978
+select * from tabla_b;

# 2022-05-10 17:03:55.604912
+\d

# 2022-05-10 17:11:56.558508
+\c pl1;

# 2022-05-10 17:11:57.539299
+\d

# 2022-05-10 17:12:00.295231
+select * from tabla_b;

# 2022-05-10 17:12:20.947478
+select * from tabla_a;

# 2022-05-10 17:13:14.791170
+select * from tabla_b;

# 2022-05-10 17:13:18.775314
+select * from tabla_a;

# 2022-05-10 17:13:22.650448
+\d

# 2022-05-10 17:14:02.231705
+\c pl1;

# 2022-05-10 17:14:05.905336
+\d

# 2022-05-10 17:14:08.545836
+create table tabla_a(A integer);

# 2022-05-10 17:14:12.856869
+create table tabla_b(B integer);

# 2022-05-10 17:14:15.716019
+select * from tabla_a;

# 2022-05-10 17:14:26.444741
+insert into tabla_a values(50);

# 2022-05-10 17:21:34.659219
+create table tabla_c(C integer);

# 2022-05-10 17:21:41.894292
+\d

# 2022-05-10 17:22:26.580900
+create server becasX foreign data wrapper postgres_fdw options (dbname 'pl1',host '10.0.2.15' ,port '5432');

# 2022-05-10 17:22:39.268946
+create foreign table public.tabla_c(C integer) server becasX;

# 2022-05-10 17:22:43.844265
+\d 

# 2022-05-10 17:22:47.340789
+select * from tabla_X;

# 2022-05-10 17:22:49.809381
+select * from tabla_c;

# 2022-05-10 17:23:02.511829
+create user mapping for postgres server becasX options(user 'postgres' , password 'postgres');

# 2022-05-10 17:23:04.465001
+select * from tabla_c;

# 2022-05-10 17:23:22.730883
+drop server becasX cascade;

# 2022-05-10 17:23:26.105610
+\d

# 2022-05-10 17:23:46.157744
+create server becasX foreign data wrapper postgres_fdw options (dbname 'pl1',host '10.0.2.15' ,port '5433');

# 2022-05-10 17:23:51.860777
+create foreign table public.tabla_c(C integer) server becasX;

# 2022-05-10 17:23:55.282500
+create user mapping for postgres server becasX options(user 'postgres' , password 'postgres');

# 2022-05-10 17:23:56.829548
+select * from tabla_c;

# 2022-05-10 17:24:13.141933
+drop server becasX cascade;

# 2022-05-10 17:24:23.548094
+create server becasX foreign data wrapper postgres_fdw options (dbname 'pl1',host '10.0.2.15' ,port '5432');

# 2022-05-10 17:24:27.673504
+create foreign table public.tabla_c(C integer) server becasX;

# 2022-05-10 17:24:35.063738
+insert into tabla_c values(50);

# 2022-05-10 17:24:42.860658
+create user mapping for postgres server becasX options(user 'postgres' , password 'postgres');

# 2022-05-10 17:24:45.437812
+select * from tabla_c;

# 2022-05-10 17:24:54.750858
+exit

# 2022-05-10 17:25:01.423337
+\c pl1;

# 2022-05-10 17:25:14.876449
+select * from tabla_a;

# 2022-05-10 17:25:16.783831
+select * from tabla_b;

# 2022-05-10 17:25:26.618750
+insert into tabla_b values(40);

# 2022-05-10 17:25:37.681076
+drop table tabla_b;

# 2022-05-10 17:25:52.337920
+drop foreign table tabla_b;

# 2022-05-10 17:25:56.274700
+\d 

# 2022-05-10 17:25:59.494456
+select * from tabla_a;

# 2022-05-10 17:26:07.091636
+select * from tabla_c;

# 2022-05-10 17:26:16.119481
+update tabla_c set C=24;

# 2022-05-10 17:26:25.853936
+select * from tabla_c;

# 2022-05-11 16:04:59.260848
+\c pl1;

# 2022-05-11 16:05:02.555999
+\d

# 2022-05-11 16:05:07.602687
+\d

# 2022-05-11 16:06:02.447057
+create server prueba foreign data wrapper postgres_fdw options (dbname 'pl1',host '10.0.2.15' ,port '5433');

# 2022-05-11 16:06:21.119930
+create user mapping for postgres server prueba options(user 'postgres' , password 'postgres');

# 2022-05-11 16:06:45.119072
+create table tabla_pru(A INTEGER);

# 2022-05-11 16:06:47.837363
+\d

# 2022-05-11 16:06:58.666559
+insert into tabla_pru values(40);

# 2022-05-11 16:07:05.963392
+select * from prueba

# 2022-05-11 16:07:37.102702
+create foreign table public.tabla_pru(A integer) server prueba;

# 2022-05-11 16:07:51.838727
+create foreign table public.tabla_pru(A integer) server prueba;

# 2022-05-11 16:08:26.196454
+create server prueba foreign data wrapper postgres_fdw options (dbname 'pl1',host '10.0.2.15' ,port '5432');

# 2022-05-11 16:08:29.820914
+create foreign table public.tabla_pru(A integer) server prueba;

# 2022-05-11 16:08:31.865515
+select * from prueba

# 2022-05-11 16:08:41.992484
+select * from tabla_pru;

# 2022-05-11 16:08:51.085837
+exit

# 2022-05-11 16:08:57.007891
+\c pl1;

# 2022-05-11 16:09:13.233183
+create user mapping for postgres server prueba options(user 'postgres' , password 'postgres');

# 2022-05-11 16:09:17.156138
+\d

# 2022-05-11 16:09:20.227520
+select * from tabla_pru;

# 2022-05-11 16:12:03.400356
+create table tab(A INTEGER);

# 2022-05-11 16:12:11.071542
+insert into tab values(50);

# 2022-05-11 16:12:25.104578
+create foreign table public.tab(A integer) server prueba;

# 2022-05-11 16:12:28.918820
+\d

# 2022-05-11 16:12:34.168465
+select * from tab

# 2022-05-11 16:14:04.972679
+create database becas1;

# 2022-05-11 16:17:39.307480
+create database becasc;

# 2022-05-11 16:17:43.105672
+create database becas2;

# 2022-05-11 16:17:54.134845
+drop database becasc;

# 2022-05-11 16:17:57.822640
+drop database becas2;

# 2022-05-11 16:18:04.744348
+drop database becas1;

# 2022-05-11 16:18:15.307446
+create database BECAS1;

# 2022-05-11 16:18:24.792506
+create database BECAS2;

# 2022-05-11 16:18:32.166741
+\c becas2

# 2022-05-11 16:18:40.229778
+\c becas1;

# 2022-05-11 16:18:47.713794
+\d

# 2022-05-11 16:18:49.948448
+\d

# 2022-05-11 16:21:18.980035
+create table tabla_b(B integer);

# 2022-05-11 16:21:27.525782
+create table tabla_a(A INTEGER);

# 2022-05-11 16:22:19.979228
+insert into tabla_a values(a0);

# 2022-05-11 16:22:22.525889
+insert into tabla_a values(10);

# 2022-05-11 16:22:43.323686
+insert into tabla_b values(20);

# 2022-05-11 16:24:08.291622
+create extension postgres_fdw;

# 2022-05-11 16:24:12.011509
+create extension postgres_fdw;

# 2022-05-11 16:29:30.775595
+create server s1 foreign data wrapper postgres_fdw options (dbname 'BECAS1',host '10.0.2.15' ,port '5432');

# 2022-05-11 16:29:55.714108
+create server s2 foreign data wrapper postgres_fdw options (dbname 'BECAS2',host '10.0.2.15' ,port '5433');

# 2022-05-11 16:32:48.416802
+create user mapping for postgres server s1 options(user 'postgres' , password 'postgres');

# 2022-05-11 16:33:00.307876
+create user mapping for postgres server s2 options(user 'postgres' , password 'postgres');

# 2022-05-11 16:35:13.962127
+\d

# 2022-05-11 16:35:36.174114
+create foreign table public.tabla_a( integer) server s2;

# 2022-05-11 16:35:43.549731
+create foreign table public.tabla_a(A integer) server s2;

# 2022-05-11 16:35:58.267201
+create foreign table public.tabla_b(B integer) server s1;

# 2022-05-11 16:36:09.704102
+\d

# 2022-05-11 16:36:19.290179
+select * from tabla_b;

# 2022-05-11 16:36:23.915178
+exit

# 2022-05-11 16:36:30.588313
+\c becas1;

# 2022-05-11 16:36:33.370219
+select * from tabla_b;

# 2022-05-11 16:36:36.384563
+exut

# 2022-05-11 16:36:37.697120
+exit

# 2022-05-11 16:36:44.540192
+\c becas1;

# 2022-05-11 16:36:56.384101
+\c becas2;

# 2022-05-11 16:37:01.465909
+\d

# 2022-05-11 16:37:05.849181
+\c becas1;

# 2022-05-11 16:37:07.191970
+<d

# 2022-05-11 16:37:09.955426
+\d

# 2022-05-11 16:37:22.065644
+drop server becas1;

# 2022-05-11 16:37:26.114158
+drop server becas1 cascade;

# 2022-05-11 16:37:29.815612
+\c becas2;

# 2022-05-11 16:37:31.003231
+\d

# 2022-05-11 16:37:42.690405
+\d

# 2022-05-12 09:05:51.132628
+\d 

# 2022-05-12 09:05:57.232408
+drop server s1;

# 2022-05-12 09:06:03.044528
+drop server s1 cascade;

# 2022-05-12 09:06:06.185737
+\d

# 2022-05-12 09:06:13.544537
+drop server s2 cascade;

# 2022-05-12 09:06:38.061221
+create server s1 foreign data wrapper postgres_fdw options (dbname 'BECAS2',host '10.0.2.15' ,port '5433');

# 2022-05-12 09:06:48.904814
+create user mapping for postgres server s1 options(user 'postgres' , password 'postgres');

# 2022-05-12 09:07:06.294487
+create server s2 foreign data wrapper postgres_fdw options (dbname 'BECAS1',host '10.0.2.15' ,port '5432');

# 2022-05-12 09:07:10.919491
+create user mapping for postgres server s2 options(user 'postgres' , password 'postgres');

# 2022-05-12 09:07:24.193077
+create foreign table public.tabla_b(B integer) server s1;

# 2022-05-12 09:07:26.725254
+exit

# 2022-05-12 09:07:43.771148
+\c becas2;

# 2022-05-12 09:07:47.177288
+\d

# 2022-05-12 09:07:48.786815
+select * from tabla_b;

# 2022-05-12 09:08:00.098909
+drop server s1 cascade;

# 2022-05-12 09:08:05.895869
+drop server s2 cascade;

# 2022-05-12 09:08:37.520833
+create server s1 foreign data wrapper postgres_fdw options (dbname 'BECAS1',host '10.0.2.15' ,port '5433');

# 2022-05-12 09:08:42.286930
+create user mapping for postgres server s1 options(user 'postgres' , password 'postgres');

# 2022-05-12 09:08:47.146561
+create foreign table public.tabla_b(B integer) server s1;

# 2022-05-12 09:08:58.849456
+create server s2 foreign data wrapper postgres_fdw options (dbname 'BECAS2',host '10.0.2.15' ,port '5432');

# 2022-05-12 09:09:02.038369
+create user mapping for postgres server s2 options(user 'postgres' , password 'postgres');

# 2022-05-12 09:09:04.991113
+exit

# 2022-05-12 09:09:12.114563
+\c becas2;

# 2022-05-12 09:09:14.802084
+exit

# 2022-05-12 09:09:32.725500
+\c becas1;

# 2022-05-12 09:09:35.822812
+\d

# 2022-05-12 09:09:38.148219
+select * from tabla_b;

# 2022-05-12 09:09:56.512127
+drop server s1 cascade;

# 2022-05-12 09:10:09.746194
+create server s1 foreign data wrapper postgres_fdw options (dbname 'BECAS2',host '10.0.2.15' ,port '5432');

# 2022-05-12 09:10:17.528044
+create user mapping for postgres server s1 options(user 'postgres' , password 'postgres');

# 2022-05-12 09:10:27.386910
+create foreign table public.tabla_b(B integer) server s1;

# 2022-05-12 09:10:30.762032
+exit

# 2022-05-12 09:10:40.577184
+\c becas1;

# 2022-05-12 09:10:43.810811
+select * from tabla_b;

# 2022-05-12 09:10:55.609429
+\c becas2;

# 2022-05-12 09:11:03.421711
+\d

# 2022-05-12 09:11:13.936540
+drop server s1 cascade;

# 2022-05-12 09:11:23.670460
+create server s1 foreign data wrapper postgres_fdw options (dbname 'BECAS2',host '10.0.2.15' ,port '5433');

# 2022-05-12 09:11:28.873365
+create user mapping for postgres server s1 options(user 'postgres' , password 'postgres');

# 2022-05-12 09:11:32.109368
+create foreign table public.tabla_b(B integer) server s1;

# 2022-05-12 09:11:34.935816
+exit

# 2022-05-12 09:11:41.234460
+\c becas2;

# 2022-05-12 09:11:48.984154
+select * from tabla_b;

# 2022-05-12 09:11:50.545280
+exit

# 2022-05-12 09:11:57.593071
+\c becas1;

# 2022-05-12 09:12:00.125279
+select * from tabla_b;

# 2022-05-12 09:12:41.921110
+exit

# 2022-05-12 09:12:47.202479
+\c becas1;

# 2022-05-12 09:12:50.811062
+\c becas2;

# 2022-05-12 09:12:52.061490
+\d

# 2022-05-12 09:13:00.906166
+exit

# 2022-05-12 09:13:06.156125
+\d

# 2022-05-12 09:13:15.858008
+drop database becas1;

# 2022-05-12 09:13:31.045943
+\c becas2;

# 2022-05-12 09:13:32.311811
+\d

# 2022-05-12 09:14:14.389538
+create server s2 foreign data wrapper postgres_fdw options (dbname 'BECAS1',host '10.0.2.15' ,port '5432');

# 2022-05-12 09:14:20.702057
+drop server s1 cascade;

# 2022-05-12 09:14:26.233004
+drop server s2 cascade;

# 2022-05-12 09:14:29.639388
+create server s2 foreign data wrapper postgres_fdw options (dbname 'BECAS1',host '10.0.2.15' ,port '5432');

# 2022-05-12 09:14:33.795051
+create user mapping for postgres server s1 options(user 'postgres' , password 'postgres');

# 2022-05-12 09:14:43.404582
+create user mapping for postgres server s2 options(user 'postgres' , password 'postgres');

# 2022-05-12 09:14:46.874585
+exit

# 2022-05-12 09:14:52.609048
+\c becas2;

# 2022-05-12 09:14:58.483831
+exxit

# 2022-05-12 09:14:59.467336
+exit

# 2022-05-12 09:15:10.295787
+\c becas1;

# 2022-05-12 09:15:12.326793
+\d

# 2022-05-12 09:15:15.086623
+select * from tabla_b;

# 2022-05-12 09:15:32.458234
+drop server s2 cascade;

# 2022-05-12 09:15:37.302569
+drop server s1 cascade;

# 2022-05-12 09:16:00.317266
+create server s1 foreign data wrapper postgres_fdw options (dbname 'becas2',host '10.0.2.15' ,port '5433');

# 2022-05-12 09:16:07.379904
+create user mapping for postgres server s1 options(user 'postgres' , password 'postgres');

# 2022-05-12 09:16:13.161558
+create foreign table public.tabla_b(B integer) server s1;

# 2022-05-12 09:16:15.317476
+\d

# 2022-05-12 09:16:18.678176
+exit

# 2022-05-12 09:16:21.599048
+exit

# 2022-05-12 09:16:28.756478
+\c becas1;

# 2022-05-12 09:16:31.223743
+\c becas2;

# 2022-05-12 09:16:39.458211
+\c becas1;

# 2022-05-12 09:16:41.490496
+select * from tabla_b;

# 2022-05-12 09:18:04.887563
+create server s2 foreign data wrapper postgres_fdw options (dbname 'becas1',host '10.0.2.15' ,port '5432');

# 2022-05-12 09:18:10.060713
+drop server s2 cascade;

# 2022-05-12 09:18:13.137157
+create server s2 foreign data wrapper postgres_fdw options (dbname 'becas1',host '10.0.2.15' ,port '5432');

# 2022-05-12 09:18:19.480734
+create user mapping for postgres server s2 options(user 'postgres' , password 'postgres');

# 2022-05-12 09:18:24.246776
+\d

# 2022-05-12 09:18:37.496354
+create foreign table public.tabla_a(A integer) server s2;

# 2022-05-12 09:18:40.558942
+select * from tabla_a;

# 2022-05-12 09:22:08.919142
+create table tabla_b(B INTEGER);

# 2022-05-12 09:22:11.575062
+select * from tabla_b;

# 2022-05-12 09:22:22.385144
+\d

# 2022-05-12 09:22:35.763747
+select * from tabla_a;

# 2022-05-12 09:22:39.107394
+select * from tabla_b;

# 2022-05-12 09:22:50.355989
+create table tabla_c(C INTEGER);

# 2022-05-12 09:22:58.185365
+create table tabla_c(C INTEGER);

# 2022-05-12 09:23:03.997841
+insert into tabla_c values(10);

# 2022-05-12 09:23:16.564929
+insert into tabla_c values(20);

# 2022-05-12 09:23:18.706305
+select * from tabla_c;

# 2022-05-12 09:23:22.752443
+select * from tabla_c;

# 2022-05-12 09:26:47.642345
+select * from (select * from tabla_b union select * from tabla_a )as sentencia

# 2022-05-12 09:29:44.221732
+\d

# 2022-05-12 09:29:50.611153
+drop table tabla_b;

# 2022-05-12 09:29:53.768051
+drop table tabla_a;

# 2022-05-12 09:29:57.189031
+drop table tabla_c;

# 2022-05-12 09:30:00.253009
+\d

# 2022-05-12 09:30:03.704959
+drop table tabla_b;

# 2022-05-12 09:30:06.127046
+drop table tabla_c;

# 2022-05-12 09:30:08.766992
+\d

# 2022-05-12 09:30:13.704601
+drop table tabla_a cascade;

# 2022-05-12 09:30:25.955562
+drop foreign table tabla_a;

# 2022-05-12 09:30:33.392251
+drop foreign table tabla_b;

# 2022-05-12 09:30:36.064302
+\d

# 2022-05-12 09:31:05.658893
+CREATE TABLE public.estudiantes (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-05-12 09:31:05.814766
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL,
+                            CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)
+                            );

# 2022-05-12 09:31:05.986412
+CREATE TABLE public.asignaturas (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-05-12 09:31:06.158561
+CREATE TABLE public.estancias (
+    fecha_inicio date NOT NULL,
+        fecha_fin date NOT NULL,
+            tipo_beca text NOT NULL,
+                duracion char(1) NOT NULL,
+                    cuantia real NOT NULL,
+                        estudiante integer NOT NULL,
+                            universidad integer NOT NULL,
+                                CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)
+                                );

# 2022-05-12 09:31:07.362649
+CREATE TABLE public.convalidaciones (
+    nota_destino char(2) NOT NULL,
+        nota_origen real NOT NULL,
+            fecha date NOT NULL,
+                estudiante_estancias integer NOT NULL,
+                    universidad_estancias integer NOT NULL,
+                        asignatura_origen integer NOT NULL,
+                            asignatura_destino integer NOT NULL,
+                                CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)
+                                );

# 2022-05-12 09:31:10.471032
+CREATE TABLE public.estudiantes (

# 2022-05-12 09:31:10.501651
+codigo_estudiante integer NOT NULL,

# 2022-05-12 09:31:10.517732
+nombre text NOT NULL,

# 2022-05-12 09:31:10.548778
+apellidos text NOT NULL,

# 2022-05-12 09:31:10.564272
+direccion text NOT NULL,

# 2022-05-12 09:31:10.596001
+pais text NOT NULL,

# 2022-05-12 09:31:10.611577
+telefono bigint NOT NULL,

# 2022-05-12 09:31:10.627374
+email text NOT NULL,

# 2022-05-12 09:31:10.658564
+creditos_aprobados integer NOT NULL,

# 2022-05-12 09:31:10.689762
+codigo_erasmus_universidades integer,

# 2022-05-12 09:31:10.705396
+CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)

# 2022-05-12 09:31:10.736025
+);

# 2022-05-12 09:31:10.752369
+CREATE TABLE public.universidades (

# 2022-05-12 09:31:10.767491
+codigo_erasmus integer NOT NULL,

# 2022-05-12 09:31:10.783301
+nombre text NOT NULL,

# 2022-05-12 09:31:10.814344
+direccion text NOT NULL,

# 2022-05-12 09:31:10.830610
+pais text NOT NULL,

# 2022-05-12 09:31:10.861632
+telefono bigint NOT NULL,

# 2022-05-12 09:31:10.877244
+email text NOT NULL,

# 2022-05-12 09:31:10.908610
+CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)

# 2022-05-12 09:31:10.923710
+);

# 2022-05-12 09:31:10.939919
+CREATE TABLE public.asignaturas (

# 2022-05-12 09:31:10.954909
+codigo_asignatura integer NOT NULL,

# 2022-05-12 09:31:10.971073
+nombre text NOT NULL,

# 2022-05-12 09:31:11.001754
+creditos integer NOT NULL,

# 2022-05-12 09:31:11.017879
+tipo text NOT NULL,

# 2022-05-12 09:31:11.033349
+universidad integer,

# 2022-05-12 09:31:11.080956
+CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)

# 2022-05-12 09:31:11.095538
+);

# 2022-05-12 09:31:11.111403
+CREATE TABLE public.estancias (

# 2022-05-12 09:31:11.127026
+fecha_inicio date NOT NULL,

# 2022-05-12 09:31:11.157905
+fecha_fin date NOT NULL,

# 2022-05-12 09:31:11.174030
+tipo_beca text NOT NULL,

# 2022-05-12 09:31:11.189468
+duracion char(1) NOT NULL,

# 2022-05-12 09:31:11.220800
+cuantia real NOT NULL,

# 2022-05-12 09:31:11.236605
+estudiante integer NOT NULL,

# 2022-05-12 09:31:11.267746
+universidad integer NOT NULL,

# 2022-05-12 09:31:11.283175
+CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)

# 2022-05-12 09:31:11.314690
+);

# 2022-05-12 09:31:11.330495
+CREATE TABLE public.convalidaciones (

# 2022-05-12 09:31:11.361741
+nota_destino char(2) NOT NULL,

# 2022-05-12 09:31:11.376619
+nota_origen real NOT NULL,

# 2022-05-12 09:31:11.392947
+fecha date NOT NULL,

# 2022-05-12 09:31:11.424062
+estudiante_estancias integer NOT NULL,

# 2022-05-12 09:31:11.439758
+universidad_estancias integer NOT NULL,

# 2022-05-12 09:31:11.470726
+asignatura_origen integer NOT NULL,

# 2022-05-12 09:31:11.502535
+asignatura_destino integer NOT NULL,

# 2022-05-12 09:31:11.564618
+CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)

# 2022-05-12 09:31:15.236756
+CREATE TABLE public.estudiantes (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-05-12 09:31:15.379150
+CREATE TABLE public.universidades (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL,
+                            CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)
+                            );

# 2022-05-12 09:31:15.658767
+CREATE TABLE public.asignaturas (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-05-12 09:31:15.785589
+CREATE TABLE public.estancias (
+    fecha_inicio date NOT NULL,
+        fecha_fin date NOT NULL,
+            tipo_beca text NOT NULL,
+                duracion char(1) NOT NULL,
+                    cuantia real NOT NULL,
+                        estudiante integer NOT NULL,
+                            universidad integer NOT NULL,
+                                CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)
+                                );

# 2022-05-12 09:31:17.161056
+CREATE TABLE public.convalidaciones (
+    nota_destino char(2) NOT NULL,
+        nota_origen real NOT NULL,
+            fecha date NOT NULL,
+                estudiante_estancias integer NOT NULL,
+                    universidad_estancias integer NOT NULL,
+                        asignatura_origen integer NOT NULL,
+                            asignatura_destino integer NOT NULL,
+                                CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)
+                                );

# 2022-05-12 09:31:19.552994
+\d

# 2022-05-12 09:31:24.552590
+\d

# 2022-05-12 09:34:20.083133
+create foreign table public.estudiantes_s1(
+
+    codigo_estudiante integer NOT NULL,
+
+    nombre text NOT NULL,
+
+    apellidos text NOT NULL,
+
+    direccion text NOT NULL,
+
+    pais text NOT NULL,
+
+    telefono bigint NOT NULL,
+
+    email text NOT NULL,
+
+    creditos_aprobados integer NOT NULL,
+
+    codigo_erasmus_universidades integer
+
+) server s2;

# 2022-05-12 09:34:40.551516
+create foreign table estudiantes_s2 (
+
+    codigo_estudiante integer NOT NULL,
+
+    nombre text NOT NULL,
+
+    apellidos text NOT NULL,
+
+    direccion text NOT NULL,
+
+    pais text NOT NULL,
+
+    telefono bigint NOT NULL,
+
+    email text NOT NULL,
+
+    creditos_aprobados integer NOT NULL,
+
+    codigo_erasmus_universidades integer
+
+) server s1;

# 2022-05-12 09:34:45.412563
+\d

# 2022-05-12 09:36:01.332702
+select * from universidades;

# 2022-05-12 09:36:07.332694
+insert into universidades values('1','alcala','calles','spain','123456789','alcalal@uah.es');

# 2022-05-12 09:36:24.036743
+insert into universidades values('3','polo','calle','polonia',123456124,'polo@polo.es');

# 2022-05-12 09:36:27.629607
+select * from universidades;

# 2022-05-12 09:37:08.012112
+insert into estudiantes values('4','paco','Lopez','calles','polonia','123456123','paco@gmail.com',5,'1');

# 2022-05-12 09:37:14.043684
+select * from estudiantes;

# 2022-05-12 09:37:38.684090
+insert into estudiantes values('2','pac','perez','calle','spain','123456789','pepe@gmail.com',3,'1');

# 2022-05-12 09:37:52.324586
+insert into estudiantes values('3','paco','Lopez','calles','polonia','123456123','paco@gmail.com',5,'3');

# 2022-05-12 09:37:54.917222
+select * from estudiantes;

# 2022-05-12 09:38:12.761704
+insert into universidades values('1','alcala','calles','spain','123456789','alcalal@uah.es');

# 2022-05-12 09:38:52.042774
+insert into estudiantes values('7','rodrigo','garcia','callessss','spain','122456123','rodrigo@gmail.com',5,'1');

# 2022-05-12 09:38:56.715144
+select * from estudiantes;

# 2022-05-12 09:39:03.949379
+\d

# 2022-05-12 09:40:26.818282
+\d

# 2022-05-12 09:40:32.896709
+select * from estancias;

# 2022-05-12 09:43:17.255379
+insert into estancias values('11/11/2011','11/11/2020','KA103','1',500,7,5);

# 2022-05-12 09:43:46.443361
+insert into universidades values('5','madrid','callesssss','spain','111222333','madrid@uah.es');

# 2022-05-12 09:44:02.677532
+exit

# 2022-05-12 09:44:09.850312
+\c becas1;

# 2022-05-12 09:44:31.871857
+select * from universidades;

# 2022-05-12 09:44:39.605982
+select * from estudiantes;

# 2022-05-12 09:45:11.261615
+select * from estancias;

# 2022-05-12 09:45:34.590948
+insert into estancias values('11/11/2011','11/11/2020','KA103','2',500,7,3);

# 2022-05-12 09:46:12.637405
+update estancias set estudiante=4

# 2022-05-12 09:46:32.264166
+insert into estancias values('11/11/2011','11/11/2020','KA107','2',500,2,3);

# 2022-05-12 09:47:47.404547
+select count(*) from estudiantes;

# 2022-05-12 09:47:55.793476
+select count* from estudiantes;

# 2022-05-12 09:47:59.856615
+select * from estudiantes;

# 2022-05-12 09:48:13.856453
+select * from estudiantes join estancias;

# 2022-05-12 09:48:21.668489
+select * from estudiantes natural join estancias;

# 2022-05-12 09:49:39.996896
+select * from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante;

# 2022-05-12 09:50:09.262566
+select * from universidades;

# 2022-05-12 09:51:17.356100
+select * from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante inner join universidades u on u.codigo_erasmus=e.codigo_erasmus_universidades;

# 2022-05-12 09:51:36.012743
+select * from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante inner join universidades u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain';

# 2022-05-12 09:51:59.527818
+select * from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante inner join universidades u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain' group by tipo_beca;

# 2022-05-12 09:52:13.857768
+select count(*) from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante inner join universidades u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain' group by tipo_beca;

# 2022-05-12 09:52:29.261918
+select es.tipo_beca, count(*) from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante inner join universidades u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain' group by tipo_beca;

# 2022-05-12 09:54:43.842065
+\o

# 2022-05-12 09:54:58.091050
+explain select es.tipo_beca, count(*) from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante inner join universidades u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain' group by tipo_beca;

# 2022-05-12 09:55:03.012279
+\o

# 2022-05-12 09:55:04.418714
+explain select es.tipo_beca, count(*) from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante inner join universidades u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain' group by tipo_beca;

# 2022-05-12 09:55:11.748686
+\o salida2.txt

# 2022-05-12 09:55:14.231030
+explain select es.tipo_beca, count(*) from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante inner join universidades u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain' group by tipo_beca;

# 2022-05-12 09:55:16.887697
+\o

# 2022-05-12 09:56:55.317884
+\d

# 2022-05-12 09:56:57.879943
+\d

# 2022-05-12 09:57:05.864115
+\c becas1;

# 2022-05-12 09:57:06.880073
+\d

# 2022-05-12 09:59:08.963275
+select * from universidades_s2;

# 2022-05-12 09:59:18.570951
+select * from estudiantes_s2

# 2022-05-12 09:59:39.366343
+drop foreign table estudiantes_s2;

# 2022-05-12 10:00:06.196337
+En BECAS1 (5432)
+
+create foreign table estudiantes (
+
+    codigo_estudiante integer NOT NULL,
+
+    nombre text NOT NULL,
+
+    apellidos text NOT NULL,
+
+    direccion text NOT NULL,
+
+    pais text NOT NULL,
+
+    telefono bigint NOT NULL,
+
+    email text NOT NULL,
+
+    creditos_aprobados integer NOT NULL,
+
+    codigo_erasmus_universidades integer
+
+) server s1;

# 2022-05-12 10:00:24.852604
+
+
+create foreign table estudiantes (
+
+    codigo_estudiante integer NOT NULL,
+
+    nombre text NOT NULL,
+
+    apellidos text NOT NULL,
+
+    direccion text NOT NULL,
+
+    pais text NOT NULL,
+
+    telefono bigint NOT NULL,
+
+    email text NOT NULL,
+
+    creditos_aprobados integer NOT NULL,
+
+    codigo_erasmus_universidades integer
+
+) server s1;

# 2022-05-12 10:15:42.454838
+select * from estancias;

# 2022-05-12 10:15:48.328634
+select * from estudiantes
+;

# 2022-05-12 10:15:54.469529
+select * from universidades;

# 2022-05-12 10:16:49.442671
+drop table asignaturas,convalidaciones,estancias,estudiantes,universidades;

# 2022-05-12 10:16:53.811789
+\d

# 2022-05-12 10:16:59.269107
+drop foreign table estudiantes_s1;

# 2022-05-12 10:17:43.769832
+CREATE TABLE public.estudiantes2 (
+    codigo_estudiante integer NOT NULL,
+        nombre text NOT NULL,
+            apellidos text NOT NULL,
+                direccion text NOT NULL,
+                    pais text NOT NULL,
+                        telefono bigint NOT NULL,
+                            email text NOT NULL,
+                                creditos_aprobados integer NOT NULL,
+                                    codigo_erasmus_universidades integer,
+                                        CONSTRAINT estudiantes_pk PRIMARY KEY (codigo_estudiante)
+                                        );

# 2022-05-12 10:17:43.909827
+CREATE TABLE public.universidades2 (
+    codigo_erasmus integer NOT NULL,
+        nombre text NOT NULL,
+            direccion text NOT NULL,
+                pais text NOT NULL,
+                    telefono bigint NOT NULL,
+                        email text NOT NULL,
+                            CONSTRAINT universidades_pk PRIMARY KEY (codigo_erasmus)
+                            );

# 2022-05-12 10:17:44.081551
+CREATE TABLE public.asignaturas2 (
+    codigo_asignatura integer NOT NULL,
+        nombre text NOT NULL,
+            creditos integer NOT NULL,
+                tipo text NOT NULL,
+                    universidad integer,
+                        CONSTRAINT asignaturas_pk PRIMARY KEY (codigo_asignatura)
+                        );

# 2022-05-12 10:17:44.253403
+CREATE TABLE public.estancias2 (
+    fecha_inicio date NOT NULL,
+        fecha_fin date NOT NULL,
+            tipo_beca text NOT NULL,
+                duracion char(1) NOT NULL,
+                    cuantia real NOT NULL,
+                        estudiante integer NOT NULL,
+                            universidad integer NOT NULL,
+                                CONSTRAINT estancias_pk PRIMARY KEY (estudiante,universidad)
+                                );

# 2022-05-12 10:17:45.471911
+CREATE TABLE public.convalidaciones2 (
+    nota_destino char(2) NOT NULL,
+        nota_origen real NOT NULL,
+            fecha date NOT NULL,
+                estudiante_estancias integer NOT NULL,
+                    universidad_estancias integer NOT NULL,
+                        asignatura_origen integer NOT NULL,
+                            asignatura_destino integer NOT NULL,
+                                CONSTRAINT convalidaciones_pk PRIMARY KEY (estudiante_estancias,universidad_estancias,asignatura_origen,asignatura_destino)
+                                );

# 2022-05-12 10:18:20.623851
+\d

# 2022-05-12 10:18:34.617796
+create foreign table estudiantes2 (
+
+    codigo_estudiante integer NOT NULL,
+
+    nombre text NOT NULL,
+
+    apellidos text NOT NULL,
+
+    direccion text NOT NULL,
+
+    pais text NOT NULL,
+
+    telefono bigint NOT NULL,
+
+    email text NOT NULL,
+
+    creditos_aprobados integer NOT NULL,
+
+    codigo_erasmus_universidades integer
+
+) server s1;
+
+

# 2022-05-12 10:18:42.539402
+select * from estudiantes2;

# 2022-05-12 10:19:06.399091
+create foreign table public.estudiantes(
+
+    codigo_estudiante integer NOT NULL,
+
+    nombre text NOT NULL,
+
+    apellidos text NOT NULL,
+
+    direccion text NOT NULL,
+
+    pais text NOT NULL,
+
+    telefono bigint NOT NULL,
+
+    email text NOT NULL,
+
+    creditos_aprobados integer NOT NULL,
+
+    codigo_erasmus_universidades integer
+
+) server s2;

# 2022-05-12 10:19:13.571062
+select * from estudiantes;

# 2022-05-12 10:19:18.243491
+\d

# 2022-05-12 10:21:03.633393
+CREATE foreign TABLE public.universidades2 (
+
+    codigo_erasmus integer NOT NULL,
+
+    nombre text NOT NULL,
+
+    direccion text NOT NULL,
+
+    pais text NOT NULL,
+
+    telefono bigint NOT NULL,
+
+    email text NOT NULL
+
+) server s1;
+
+CREATE foreign TABLE public.asignaturas2 (
+
+    codigo_asignatura integer NOT NULL,
+
+    nombre text NOT NULL,
+
+    creditos integer NOT NULL,
+
+    tipo text NOT NULL,
+
+    universidad integer
+
+) server s1;
+
+CREATE foreign TABLE public.estancias2 (
+
+    fecha_inicio date NOT NULL,
+
+    fecha_fin date NOT NULL,
+
+    tipo_beca text NOT NULL,
+
+    duracion char(1) NOT NULL,
+
+    cuantia real NOT NULL,
+
+    estudiante integer NOT NULL,
+
+    universidad integer NOT NULL
+
+) server s1;
+
+CREATE foreign TABLE public.convalidaciones2 (
+
+    nota_destino char(2) NOT NULL,
+
+    nota_origen real NOT NULL,
+
+    fecha date NOT NULL,
+
+    estudiante_estancias integer NOT NULL,
+
+    universidad_estancias integer NOT NULL,
+
+    asignatura_origen integer NOT NULL,
+
+    asignatura_destino integer NOT NULL
+
+) server s1;

# 2022-05-12 10:21:06.978072
+\d

# 2022-05-12 10:21:48.664076
+
+
+CREATE foreign TABLE public.universidades(
+
+    codigo_erasmus integer NOT NULL,
+
+    nombre text NOT NULL,
+
+    direccion text NOT NULL,
+
+    pais text NOT NULL,
+
+    telefono bigint NOT NULL,
+
+    email text NOT NULL
+
+) server s2;
+
+CREATE foreign TABLE public.asignaturas(
+
+    codigo_asignatura integer NOT NULL,
+
+    nombre text NOT NULL, 
+
+    creditos integer NOT NULL,
+
+    tipo text NOT NULL,
+
+    universidad integer
+
+) server s2;
+
+CREATE foreign TABLE public.estancias(
+
+    fecha_inicio date NOT NULL,
+
+    fecha_fin date NOT NULL,
+
+    tipo_beca text NOT NULL,
+
+    duracion char(1) NOT NULL,
+
+    cuantia real NOT NULL,
+
+    estudiante integer NOT NULL,
+
+    universidad integer NOT NULL
+
+) server s2;
+
+CREATE foreign TABLE public.convalidaciones (
+
+    nota_destino char(2) NOT NULL,
+
+    nota_origen real NOT NULL,
+
+    fecha date NOT NULL,
+
+    estudiante_estancias integer NOT NULL,
+
+    universidad_estancias integer NOT NULL,
+
+    asignatura_origen integer NOT NULL,
+
+    asignatura_destino integer NOT NULL
+
+) server s2;

# 2022-05-12 10:21:50.493875
+\d

# 2022-05-12 10:22:25.876058
+select es.tipo_beca, count(*) from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante inner join universidades u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain' group by tipo_beca;

# 2022-05-12 10:23:01.126151
+insert into universidades values('5','madrid','callesssss','spain','111222333','madrid@uah.es');

# 2022-05-12 10:23:12.798306
+insert into universidades values('1','alcala','calles','spain','123456789','alcalal@uah.es');

# 2022-05-12 10:23:31.158817
+select * from universidades
+;

# 2022-05-12 10:24:00.713817
+delete from universidades where codigo_erasmus='5';

# 2022-05-12 10:24:12.821904
+insert into universidades2 values('5','madrid','callesssss','spain','111222333','madrid@uah.es');

# 2022-05-12 10:24:42.572925
+select * from (select * from universidades union select * from universidades2);

# 2022-05-12 10:24:54.304707
+select * from (select * from universidades union select * from universidades2)as uni;

# 2022-05-12 10:25:06.727907
+select * from universidades2
+;

# 2022-05-12 10:25:29.649488
+insert into estancias values('11/11/2011','11/11/2020','KA103','1',500,7,5);

# 2022-05-12 10:25:39.337855
+insert into estudiantes values('7','rodrigo','garcia','callessss','spain','122456123','rodrigo@gmail.com',5,'1');

# 2022-05-12 10:26:33.368292
+select es.tipo_beca, count(*) from estudiantes e inner join estancias es on e.codigo_estudiante=es.estudiante inner join (select * from universidades union select * from universidades2) u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain' group by tipo_beca;

# 2022-05-12 10:27:02.258849
+select es.tipo_beca, count(*) from estudiantes e inner join (select * from estancias union select * from estancias2) es on e.codigo_estudiante=es.estudiante inner join (select * from universidades union select * from universidades2) u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain' group by tipo_beca;

# 2022-05-12 10:27:34.634079
+select es.tipo_beca, count(*) from (select * from estudiantes union select * from estudiantes2) e inner join (select * from estancias union select * from estancias2) es on e.codigo_estudiante=es.estudiante inner join (select * from universidades union select * from universidades2) u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain' group by tipo_beca;

# 2022-05-12 10:27:42.322962
+\o salida2.txt

# 2022-05-12 10:28:15.181103
+explain select es.tipo_beca, count(*) from (select * from estudiantes union select * from estudiantes2) e inner join (select * from estancias union select * from estancias2) es on e.codigo_estudiante=es.estudiante inner join (select * from universidades union select * from universidades2) u on u.codigo_erasmus=e.codigo_erasmus_universidades where u.pais='spain'  group by tipo_beca;

# 2022-05-12 10:28:17.712089
+\o

# 2022-05-12 10:45:56.477499
+exit

# 2022-05-12 10:45:59.335686
+exit

# 2022-05-12 11:08:44.434107
+\c becas1;

# 2022-05-12 11:08:46.810709
+\c becas2;

# 2022-05-12 11:08:53.279707
+select * from universidades2

# 2022-05-12 11:09:04.856606
+update universidades2 set tel

# 2022-05-12 11:09:16.809228
+update universidades2 set telefono ='123412342'

# 2022-05-12 11:09:35.029466
+begin

# 2022-05-12 11:09:57.346589
+update universidades2 set telefono ='123412341'

# 2022-05-12 11:10:25.496126
+rollback

# 2022-05-12 11:11:17.025994
+begin

# 2022-05-12 11:11:18.978795
+update universidades2 set telefono ='123412341'

# 2022-05-12 11:12:37.026032
+rollback

# 2022-05-12 11:14:11.510334
+exit

# 2022-05-12 11:15:50.321048
+\c becas2;

# 2022-05-12 11:15:54.320554
+\d

# 2022-05-12 11:16:03.008621
+begin

# 2022-05-12 11:16:05.946578
+select * from universidades2

# 2022-05-12 11:16:08.447645
+update universidades2 set telefono ='123412341'

# 2022-05-12 11:18:49.695956
+exit

# 2022-05-12 11:24:05.941142
+\c becas2;

# 2022-05-12 11:24:07.395006
+\c becas1;

# 2022-05-12 11:24:10.675028
+begin

# 2022-05-12 11:24:12.317137
+select * from universidades2

# 2022-05-12 11:25:22.009380
+update universidades2 set telefono ='123412341'

# 2022-05-12 11:25:37.899947
+rollback

# 2022-05-12 11:29:53.221154
+\c becas1;

# 2022-05-12 11:29:56.949776
+update universidades2 set telefono ='123412341'

# 2022-05-12 11:30:07.290379
+select * from universidades

# 2022-05-12 11:30:25.446392
+update universidades set telefono ='123412341' where codigo_erasmus =1

# 2022-05-12 11:30:41.258654
+exit

# 2022-05-12 16:49:00.303686
+\c becas1;

# 2022-05-12 16:49:46.927164
+\c becas1;

# 2022-05-12 16:49:49.708768
+\c becas2;

# 2022-05-12 16:50:34.153431
+\c becas1

# 2022-05-12 16:50:36.237376
+\d 

# 2022-05-12 16:51:17.289355
+\c becas2;

# 2022-05-12 16:51:19.273783
+\d

# 2022-05-12 16:51:29.914978
+\d

# 2022-05-12 16:51:39.993896
+select * from universidades2;

# 2022-05-12 16:51:45.266474
+select * from universidades2;

# 2022-05-12 16:52:04.157971
+insert into universidades2 values('10','madrid','callesssss','spain','111222333','madrid@uah.es');

# 2022-05-12 16:52:06.735124
+select * from universidades2;

# 2022-05-12 16:53:13.571494
+exit

# 2022-05-12 16:53:18.603145
+\c becas2;

# 2022-05-12 16:53:20.695915
+select * from universidades2;

# 2022-05-12 16:53:27.024611
+exit

# 2022-05-12 16:53:30.305293
+exit

# 2022-05-12 16:53:45.961306
+\c becas2;

# 2022-05-12 16:53:49.148776
+select * from universidades2;

# 2022-05-12 16:53:55.118291
+\c becas2;

# 2022-05-12 16:53:56.461871
+select * from universidades2;

# 2022-05-12 16:54:35.961812
+select * from universidades;

# 2022-05-12 16:54:56.305758
+exit

# 2022-05-12 17:00:14.758822
+exit

# 2022-05-12 17:02:20.837252
+\c becas2;

# 2022-05-12 17:02:22.102878
+\d

# 2022-05-12 17:02:23.508390
+select * from universidades;

# 2022-05-12 17:02:25.868299
+select * from universidades2;

# 2022-05-12 17:02:39.132991
+\c becas2;

# 2022-05-12 17:02:40.618783
+select * from universidades2;

# 2022-05-12 17:02:42.039960
+select * from universidades;

# 2022-05-12 17:02:52.930962
+select * from universidades;

# 2022-05-12 17:02:54.320997
+select * from universidades2;

# 2022-05-12 17:03:21.555477
+exit

# 2022-05-12 17:03:27.587090
+\c becas1;

# 2022-05-12 17:03:29.540436
+select * from universidades2;

# 2022-05-12 17:03:31.102154
+select * from universidades1;

# 2022-05-12 17:03:33.794402
+select * from universidades;

# 2022-05-12 17:06:01.842217
+exit

# 2022-05-12 17:06:38.874175
+\c becas1;

# 2022-05-12 17:06:41.388607
+select * from universidades;

# 2022-05-12 17:06:42.748322
+select * from universidades2;

# 2022-05-12 17:06:48.701906
+exit

# 2022-05-12 17:07:01.045209
+\c becas2;

# 2022-05-12 17:07:02.296311
+select * from universidades2;

# 2022-05-12 17:07:06.858651
+exit

# 2022-05-12 17:07:12.060842
+exit

# 2022-05-12 17:07:17.561210
+\c becas2;

# 2022-05-12 17:07:25.920388
+select * from universidades;

# 2022-05-12 17:07:27.888642
+select * from universidades2;

# 2022-05-12 17:08:11.967839
+exit

# 2022-05-12 17:08:15.217712
+exit

# 2022-05-12 17:08:17.498849
+exit

# 2022-05-12 17:08:19.920826
+exit

# 2022-05-12 17:08:43.061432
+\c becas1;

# 2022-05-12 17:09:01.998806
+\c becas12;

# 2022-05-12 17:09:04.748701
+\c becas2;

# 2022-05-12 17:09:17.139477
+\c becas1;

# 2022-05-12 17:09:19.154954
+select * from universidades2;

# 2022-05-12 17:09:21.045907
+select * from universidades;

# 2022-05-12 17:09:29.326381
+\c becas2;

# 2022-05-12 17:09:30.592470
+select * from universidades;

# 2022-05-12 17:09:32.107701
+select * from universidades2;

# 2022-05-12 17:12:42.347997
+\c becas1;

# 2022-05-12 17:13:38.582794
+\c becas2;

# 2022-05-12 17:13:45.145929
+\c becas2;

# 2022-05-12 17:13:49.238997
+select * from universidades2;

# 2022-05-12 17:13:50.677137
+select * from universidades;

# 2022-05-12 17:13:53.051703
+select * from universidades2;

# 2022-05-12 17:13:55.066848
+select * from universidades;

# 2022-05-12 17:13:58.338860
+select * from universidades2;

# 2022-05-12 17:14:00.213500
+select * from universidades;

# 2022-05-12 17:22:34.196297
+select * from universidades2;

# 2022-05-12 17:23:24.929957
+insert into universidades2 values('12','uaParis','callesssss','paris','111222333','madrid@uah.es');

# 2022-05-12 17:23:27.290285
+select * from universidades;

# 2022-05-12 17:23:30.445197
+select * from universidades2;

# 2022-05-12 17:23:39.446484
+select * from universidades2;

# 2022-05-12 17:23:46.181432
+select * from universidades2;

# 2022-05-12 17:24:36.352544
+exit

# 2022-05-12 17:24:44.305496
+\c becas2;

# 2022-05-12 17:24:45.445941
+select * from universidades2;

# 2022-05-12 17:29:06.414183
+exit

# 2022-05-12 17:29:12.789895
+\c becas2;

# 2022-05-12 17:29:13.992964
+select * from universidades2;

# 2022-05-12 17:31:01.736716
+exit

# 2022-05-12 17:31:03.488009
+exit

# 2022-05-12 17:31:11.003464
+exit

# 2022-05-12 17:31:13.362525
+exit

# 2022-05-12 17:33:08.793874
+\c becas1;

# 2022-05-12 17:33:27.102012
+\c becas2;

# 2022-05-12 17:33:30.161274
+select * from universidades2;

# 2022-05-12 17:33:31.860365
+select * from universidades1;

# 2022-05-12 17:33:33.737521
+select * from universidades;

# 2022-05-12 17:33:42.116061
+insert into universidades2 values('13','uaParis2','callesssss','paris','111222333','madrid@uah.es');

# 2022-05-12 17:33:44.590570
+select * from universidades;

# 2022-05-12 17:33:46.120362
+select * from universidades2;

# 2022-05-12 17:33:50.373187
+select * from universidades2;

# 2022-05-12 17:34:13.687495
+\c becas1;

# 2022-05-12 17:34:15.274080
+select * from universidades2;

# 2022-05-12 17:34:16.844150
+select * from universidades;

# 2022-05-12 17:34:33.407541
+\c becas;

# 2022-05-12 17:34:34.588390
+\c becas2;

# 2022-05-12 17:34:35.756884
+select * from universidades;

# 2022-05-12 17:34:37.979627
+select * from universidades2;

# 2022-05-12 17:35:13.910963
+insert into universidades values('14','uaParis2','callesssss','paris','111222333','madrid@uah.es');

# 2022-05-12 17:35:17.126280
+select * from universidades;

# 2022-05-12 17:35:20.324408
+select * from universidades;

# 2022-05-12 17:35:28.189911
+select * from universidades;

# 2022-05-12 17:35:33.671221
+select * from universidades;

# 2022-05-12 17:35:54.503308
+insert into universidades2 values('123','uaParis3','callesssss','paris','111222333','madrid@uah.es');

# 2022-05-12 17:36:03.486116
+insert into universidades values('1243','uaParis34','callesssss','paris','111222333','madrid@uah.es');

# 2022-05-12 17:36:07.178019
+select * from universidades;

# 2022-05-12 17:36:08.526452
+select * from universidades2;

# 2022-05-12 17:36:15.424163
+select * from universidades2;

# 2022-05-12 17:36:29.698680
+\d

# 2022-05-12 17:36:49.818822
+select * from universidades2;

# 2022-05-12 17:37:16.017615
+select * from universidades2;

# 2022-05-12 17:37:21.900400
+select * from universidades2;

# 2022-05-12 17:37:24.235851
+select * from universidades;

# 2022-05-12 17:37:27.783336
+select * from universidades;

# 2022-05-12 17:38:54.370117
+exit

# 2022-05-12 17:39:00.102780
+\c becas1;

# 2022-05-12 17:39:01.853966
+select * from universidades;

# 2022-05-12 17:39:05.634832
+select * from universidades2;

# 2022-05-12 17:39:18.378131
+exit

# 2022-05-12 17:39:25.537135
+\c becas2;

# 2022-05-12 17:39:26.589616
+select * from universidades2;

# 2022-05-12 17:39:28.651392
+select * from universidades;
